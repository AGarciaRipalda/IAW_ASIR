{"config":{"lang":["es"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"WoW Test Manager","text":"<p>Sistema completo de gesti\u00f3n de pruebas QA con tem\u00e1tica World of Warcraft, desarrollado en PHP puro con SQLite.</p>"},{"location":"#descripcion","title":"\ud83c\udfae Descripci\u00f3n","text":"<p>WoW Test Manager es un panel de administraci\u00f3n robusto y seguro para gestionar testers, sesiones de prueba, contenido y reportes, con integraci\u00f3n a la Blizzard Battle.net API.</p>"},{"location":"#caracteristicas-principales","title":"\ud83d\ude80 Caracter\u00edsticas Principales","text":"<ul> <li>\u2705 Sistema de autenticaci\u00f3n con roles jer\u00e1rquicos</li> <li>\u2705 Dashboard interactivo con KPIs y gr\u00e1ficos</li> <li>\u2705 Gesti\u00f3n completa de testers, sesiones y contenido</li> <li>\u2705 Exportaci\u00f3n de reportes en CSV y PDF profesional</li> <li>\u2705 Integraci\u00f3n con Blizzard API para sincronizaci\u00f3n de personajes</li> <li>\u2705 Sistema de auditor\u00eda autom\u00e1tico</li> <li>\u2705 Dise\u00f1o tem\u00e1tico de World of Warcraft</li> </ul>"},{"location":"#documentacion","title":"\ud83d\udcda Documentaci\u00f3n","text":"<p>Consulta la documentaci\u00f3n t\u00e9cnica completa para m\u00e1s detalles sobre: - Arquitectura del sistema - C\u00f3digo de ejemplo - Estructura de base de datos - Gu\u00eda de instalaci\u00f3n - Medidas de seguridad implementadas</p>"},{"location":"#capturas-de-pantalla","title":"\ud83d\uddbc\ufe0f Capturas de Pantalla","text":""},{"location":"#dashboard","title":"Dashboard","text":""},{"location":"#gestion-de-testers","title":"Gesti\u00f3n de Testers","text":""},{"location":"#reportes","title":"Reportes","text":""},{"location":"#tecnologias","title":"\ud83d\udee0\ufe0f Tecnolog\u00edas","text":"<ul> <li>Backend: PHP 8.2.12 con PDO</li> <li>Base de Datos: SQLite 3</li> <li>Frontend: HTML5, CSS3, JavaScript</li> <li>Visualizaci\u00f3n: Chart.js</li> <li>Exportaci\u00f3n: TCPDF</li> <li>API: Blizzard Battle.net API con cURL</li> </ul>"},{"location":"#instalacion","title":"\ud83d\udce6 Instalaci\u00f3n","text":"<ol> <li>Requisitos</li> <li>PHP 7.4 o superior</li> <li>Apache 2.4+</li> <li> <p>Extensiones: pdo_sqlite, curl, json</p> </li> <li> <p>Configuraci\u00f3n <pre><code># Crear base de datos\nphp setup/crear_bd_wow.php\nphp setup/insertar_datos_wow.php\nphp setup/crear_tabla_audit.php\n\n# Instalar dependencias\ncomposer install\n</code></pre></p> </li> <li> <p>Acceso</p> </li> <li>URL: <code>http://localhost/my_web/auth/wow_login.php</code></li> <li>Usuario: <code>admin</code></li> <li>Contrase\u00f1a: <code>admin123</code></li> </ol>"},{"location":"#seguridad","title":"\ud83d\udd12 Seguridad","text":"<ul> <li>Protecci\u00f3n CSRF en todas las operaciones</li> <li>Sentencias preparadas PDO (anti SQL Injection)</li> <li>Sanitizaci\u00f3n XSS con htmlspecialchars()</li> <li>Sistema de roles y permisos</li> <li>Logs de auditor\u00eda autom\u00e1ticos</li> <li>Protecci\u00f3n anti-fuerza bruta</li> </ul>"},{"location":"#licencia","title":"\ud83d\udcc4 Licencia","text":"<p>Proyecto educativo desarrollado para la asignatura de Desarrollo Web (IAW).</p>"},{"location":"#autor","title":"\ud83d\udc64 Autor","text":"<p>Alejandro Enero 2026</p>"},{"location":"DOCUMENTACION_TECNICA_COMPLETA/","title":"\ud83d\udcda WoW Test Manager - Documentaci\u00f3n T\u00e9cnica Completa","text":""},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#resumen-del-proyecto","title":"\ud83c\udfae Resumen del Proyecto","text":"<p>WoW Test Manager es un sistema completo de gesti\u00f3n de pruebas QA (Quality Assurance) con tem\u00e1tica de World of Warcraft, desarrollado completamente en PHP puro con base de datos SQLite. El proyecto implementa un panel de administraci\u00f3n robusto y seguro para gestionar testers, sesiones de prueba, contenido y reportes.</p>"},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#tecnologias-utilizadas","title":"Tecnolog\u00edas Utilizadas","text":"<ul> <li>Backend: PHP 8.2.12 con PDO (PHP Data Objects)</li> <li>Base de Datos: SQLite 3 con sentencias preparadas</li> <li>Frontend: HTML5, CSS3 vanilla, JavaScript nativo</li> <li>Visualizaci\u00f3n: Chart.js para gr\u00e1ficos estad\u00edsticos</li> <li>Exportaci\u00f3n: TCPDF para generaci\u00f3n de PDFs profesionales</li> <li>API Externa: Blizzard Battle.net API con cURL</li> <li>Servidor: Apache 2.4.58 (XAMPP)</li> </ul>"},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#capturas-de-pantalla-del-sistema","title":"\ud83d\uddbc\ufe0f Capturas de Pantalla del Sistema","text":""},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#pagina-de-login","title":"P\u00e1gina de Login","text":"<p>Interfaz de autenticaci\u00f3n con dise\u00f1o tem\u00e1tico de WoW, incluyendo las estatuas del Portal Oscuro y validaci\u00f3n CSRF.</p>"},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#dashboard-command-center","title":"Dashboard (Command Center)","text":"<p>Panel principal con KPIs en tiempo real, gr\u00e1ficos interactivos de rendimiento y tabla de sesiones recientes.</p>"},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#gestion-de-testers","title":"Gesti\u00f3n de Testers","text":"<p>Formulario de registro de testers con roles (Tank/DPS/Healer) y facciones, junto con tabla de gesti\u00f3n completa.</p>"},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#gestion-de-sesiones","title":"Gesti\u00f3n de Sesiones","text":"<p>Registro detallado de sesiones de prueba con puntuaciones, dificultad, tiempo jugado y comentarios.</p>"},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#gestion-de-contenido","title":"Gesti\u00f3n de Contenido","text":"<p>Administraci\u00f3n de contenido a probar (Raids, Dungeons, Classes, Talents) con informaci\u00f3n de parches.</p>"},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#gestion-de-usuarios","title":"Gesti\u00f3n de Usuarios","text":"<p>Panel de administraci\u00f3n de usuarios del sistema con roles jer\u00e1rquicos (admin, tester, viewer).</p>"},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#pagina-de-reportes","title":"P\u00e1gina de Reportes","text":"<p>Estad\u00edsticas detalladas con top testers, contenido dif\u00edcil y exportaci\u00f3n a CSV/PDF profesional.</p>"},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#sincronizacion-blizzard-api","title":"Sincronizaci\u00f3n Blizzard API","text":"<p>Interfaz para vincular testers con personajes reales de WoW y sincronizar datos desde la API oficial.</p>"},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#configuracion-del-sistema","title":"Configuraci\u00f3n del Sistema","text":"<p>Panel de configuraci\u00f3n con opciones de personalizaci\u00f3n del tema, colores y preferencias del sistema.</p>"},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#perfil-de-usuario","title":"Perfil de Usuario","text":"<p>P\u00e1gina de perfil personal con informaci\u00f3n del usuario, estad\u00edsticas y opciones de cuenta.</p>"},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#funcionalidades-principales","title":"\ud83c\udfaf Funcionalidades Principales","text":""},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#1-sistema-de-autenticacion-y-autorizacion","title":"1. Sistema de Autenticaci\u00f3n y Autorizaci\u00f3n","text":""},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#caracteristicas","title":"Caracter\u00edsticas","text":"<ul> <li>Login seguro con protecci\u00f3n CSRF</li> <li>Sistema de roles jer\u00e1rquico: viewer &lt; tester &lt; admin</li> <li>Protecci\u00f3n anti-fuerza bruta: 5 intentos, bloqueo de 15 minutos</li> <li>Sesiones blindadas con cookies HttpOnly</li> </ul>"},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#codigo-de-ejemplo","title":"C\u00f3digo de Ejemplo","text":"<pre><code>// includes/wow_auth.php\n\nfunction verificarLogin() {\n    if (!isset($_SESSION['user'])) {\n        header(\"Location: ../auth/wow_login.php\");\n        exit;\n    }\n}\n\nfunction verificarRol($rolRequerido) {\n    $roles = ['viewer' =&gt; 1, 'tester' =&gt; 2, 'admin' =&gt; 3];\n    $miRol = $_SESSION['user']['role'] ?? 'viewer';\n\n    if (($roles[$miRol] ?? 0) &lt; ($roles[$rolRequerido] ?? 0)) {\n        die(\"&lt;h1&gt;Acceso Denegado&lt;/h1&gt;\");\n    }\n}\n\nfunction validarCSRF($token) {\n    if (empty($token) || $token !== ($_SESSION['csrf_token'] ?? '')) {\n        die(\"Error de seguridad (CSRF).\");\n    }\n}\n</code></pre>"},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#2-dashboard-interactivo","title":"2. Dashboard Interactivo","text":""},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#caracteristicas_1","title":"Caracter\u00edsticas","text":"<ul> <li>KPIs en tiempo real: Testers activos, contenidos, sesiones, score global</li> <li>Gr\u00e1ficos din\u00e1micos con Chart.js:</li> <li>Rendimiento por tipo de contenido (Raid, Dungeon, Class, Talent)</li> <li>Distribuci\u00f3n de dificultad (Normal, Heroic, Mythic)</li> <li>Tabla de sesiones recientes con c\u00f3digo de colores por puntuaci\u00f3n</li> <li>M\u00fasica ambiente de taberna (opcional)</li> </ul>"},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#codigo-de-ejemplo_1","title":"C\u00f3digo de Ejemplo","text":"<pre><code>// admin/wow_dashboard.php\n\n// Obtener estad\u00edsticas\n$totalTesters = (int)$db-&gt;query(\"SELECT COUNT(*) FROM tester\")-&gt;fetchColumn();\n$totalContenido = (int)$db-&gt;query(\"SELECT COUNT(*) FROM content\")-&gt;fetchColumn();\n$totalSesiones = (int)$db-&gt;query(\"SELECT COUNT(*) FROM test_session\")-&gt;fetchColumn();\n$promedioScore = $db-&gt;query(\"SELECT AVG(score) FROM test_session\")-&gt;fetchColumn();\n\n// \u00daltimas sesiones\n$sesiones = $db-&gt;query(\"\n    SELECT s.id, tester.name AS tester, content.name AS contenido,\n           s.difficulty, s.score\n    FROM test_session s\n    JOIN tester ON s.tester = tester.id\n    JOIN content ON s.content = content.id\n    ORDER BY s.id DESC LIMIT 5\n\")-&gt;fetchAll(PDO::FETCH_ASSOC);\n</code></pre>"},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#3-gestion-de-testers","title":"3. Gesti\u00f3n de Testers","text":""},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#caracteristicas_2","title":"Caracter\u00edsticas","text":"<ul> <li>CRUD completo (Crear, Leer, Actualizar, Eliminar)</li> <li>Roles: Tank, DPS, Healer</li> <li>Facciones: Alliance, Horde, Neutral</li> <li>Vinculaci\u00f3n con personajes WoW (Fase 2)</li> <li>Paginaci\u00f3n de resultados</li> </ul>"},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#codigo-de-ejemplo_2","title":"C\u00f3digo de Ejemplo","text":"<pre><code>// admin/wow_testers.php\n\nif ($_SERVER['REQUEST_METHOD'] === 'POST') {\n    validarCSRF($_POST['csrf_token'] ?? '');\n\n    if (isset($_POST['delete'])) {\n        $stmt = $db-&gt;prepare(\"DELETE FROM tester WHERE id = ?\");\n        $stmt-&gt;execute([(int)$_POST['delete']]);\n    } else {\n        $id = (int)$_POST['id'];\n        $name = trim($_POST['name']);\n        $role = $_POST['role'];\n        $faction = $_POST['faction'];\n\n        if ($id &gt; 0) {\n            // Actualizar\n            $stmt = $db-&gt;prepare(\"UPDATE tester SET name=?, role=?, faction=? WHERE id=?\");\n            $stmt-&gt;execute([$name, $role, $faction, $id]);\n        } else {\n            // Crear\n            $stmt = $db-&gt;prepare(\"INSERT INTO tester (name, role, faction) VALUES (?, ?, ?)\");\n            $stmt-&gt;execute([$name, $role, $faction]);\n        }\n    }\n}\n</code></pre>"},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#4-gestion-de-sesiones-de-prueba","title":"4. Gesti\u00f3n de Sesiones de Prueba","text":""},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#caracteristicas_3","title":"Caracter\u00edsticas","text":"<ul> <li>Registro detallado de sesiones QA</li> <li>Campos: Tester, Contenido, Dificultad, Score (0-100), Tiempo, Comentarios</li> <li>B\u00fasqueda y filtrado de sesiones</li> <li>Validaci\u00f3n de datos con funciones nativas PHP</li> <li>Paginaci\u00f3n de resultados</li> </ul>"},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#codigo-de-ejemplo_3","title":"C\u00f3digo de Ejemplo","text":"<pre><code>// admin/wow_sesiones.php\n\nif ($_SERVER['REQUEST_METHOD'] === 'POST' &amp;&amp; !isset($_POST['delete'])) {\n    validarCSRF($_POST['csrf_token'] ?? '');\n\n    $tester = (int)$_POST['tester'];\n    $content = (int)$_POST['content'];\n    $difficulty = $_POST['difficulty'];\n    $score = (int)$_POST['score'];\n    $hours = (int)($_POST['hours'] ?? 0);\n    $minutes = (int)($_POST['minutes'] ?? 0);\n    $comments = trim($_POST['comments']);\n\n    $timePlayed = sprintf(\"%dh%02dm\", $hours, $minutes);\n\n    if ($id &gt; 0) {\n        // Actualizar\n        $stmt = $db-&gt;prepare(\"\n            UPDATE test_session \n            SET tester=?, content=?, difficulty=?, score=?, time_played=?, comments=? \n            WHERE id=?\n        \");\n        $stmt-&gt;execute([$tester, $content, $difficulty, $score, $timePlayed, $comments, $id]);\n    } else {\n        // Crear\n        $stmt = $db-&gt;prepare(\"\n            INSERT INTO test_session (tester, content, difficulty, score, time_played, comments) \n            VALUES (?, ?, ?, ?, ?, ?)\n        \");\n        $stmt-&gt;execute([$tester, $content, $difficulty, $score, $timePlayed, $comments]);\n    }\n}\n</code></pre>"},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#5-sistema-de-reportes-y-exportacion","title":"5. Sistema de Reportes y Exportaci\u00f3n","text":""},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#caracteristicas_4","title":"Caracter\u00edsticas","text":"<ul> <li>Estad\u00edsticas avanzadas:</li> <li>Top 5 testers por calidad</li> <li>Contenido m\u00e1s dif\u00edcil</li> <li>Distribuci\u00f3n de sesiones</li> <li>Exportaci\u00f3n CSV completa</li> <li>Exportaci\u00f3n PDF profesional con TCPDF (Fase 2)</li> </ul>"},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#codigo-de-ejemplo-exportacion-csv","title":"C\u00f3digo de Ejemplo - Exportaci\u00f3n CSV","text":"<pre><code>// admin/wow_reportes.php\n\nif (isset($_GET['export'])) {\n    header('Content-Type: text/csv; charset=utf-8');\n    header('Content-Disposition: attachment; filename=reporte_wow.csv');\n\n    $output = fopen('php://output', 'w');\n    fputcsv($output, ['ID', 'Tester', 'Contenido', 'Dificultad', 'Score', 'Horas', 'Comentarios']);\n\n    $rows = $db-&gt;query(\"\n        SELECT s.id, t.name AS tester, c.name AS contenido, \n               s.difficulty, s.score, s.time_played, s.comments\n        FROM test_session s\n        JOIN tester t ON s.tester = t.id\n        JOIN content c ON s.content = c.id\n        ORDER BY s.id DESC\n    \")-&gt;fetchAll(PDO::FETCH_ASSOC);\n\n    foreach ($rows as $row) {\n        fputcsv($output, $row);\n    }\n\n    fclose($output);\n    exit;\n}\n</code></pre>"},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#codigo-de-ejemplo-exportacion-pdf","title":"C\u00f3digo de Ejemplo - Exportaci\u00f3n PDF","text":"<pre><code>// admin/wow_reportes_pdf.php\n\nrequire_once __DIR__ . '/../vendor/autoload.php';\n\nclass WoWReportPDF extends TCPDF {\n    public function Header() {\n        $logoPath = __DIR__ . '/../assets/wow_logo.png';\n        if (file_exists($logoPath)) {\n            $this-&gt;Image($logoPath, 15, 10, 30);\n        }\n\n        $this-&gt;SetFont('helvetica', 'B', 18);\n        $this-&gt;SetTextColor(255, 209, 0); // Dorado WoW\n        $this-&gt;Cell(0, 15, 'WoW Test Manager', 0, false, 'C');\n    }\n}\n\n$pdf = new WoWReportPDF(PDF_PAGE_ORIENTATION, PDF_UNIT, PDF_PAGE_FORMAT, true, 'UTF-8', false);\n$pdf-&gt;SetCreator('WoW Test Manager');\n$pdf-&gt;SetTitle('Reporte de Sesiones QA - ' . date('d/m/Y'));\n$pdf-&gt;AddPage();\n\n// A\u00f1adir contenido al PDF...\n$pdf-&gt;Output('reporte_wow_' . date('Ymd') . '.pdf', 'D');\n</code></pre>"},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#6-integracion-con-blizzard-api-fase-2","title":"6. Integraci\u00f3n con Blizzard API (Fase 2)","text":""},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#caracteristicas_5","title":"Caracter\u00edsticas","text":"<ul> <li>Autenticaci\u00f3n OAuth2 con credenciales de cliente</li> <li>Consulta de perfiles de personajes WoW</li> <li>Datos sincronizados:</li> <li>Nivel del personaje</li> <li>Clase (con nombre localizado)</li> <li>Item Level (ilvl)</li> <li>Facci\u00f3n</li> <li>Sistema de cach\u00e9 (TTL configurable)</li> <li>Manejo robusto de errores HTTP</li> </ul>"},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#codigo-de-ejemplo-autenticacion","title":"C\u00f3digo de Ejemplo - Autenticaci\u00f3n","text":"<pre><code>// includes/blizzard_api.php\n\nclass BlizzardAPI {\n    private $clientId;\n    private $clientSecret;\n    private $accessToken = null;\n\n    public function authenticate() {\n        if ($this-&gt;accessToken &amp;&amp; time() &lt; $this-&gt;tokenExpiry) {\n            return true;\n        }\n\n        $ch = curl_init(BLIZZARD_OAUTH_URL);\n        curl_setopt_array($ch, [\n            CURLOPT_RETURNTRANSFER =&gt; true,\n            CURLOPT_POST =&gt; true,\n            CURLOPT_USERPWD =&gt; $this-&gt;clientId . ':' . $this-&gt;clientSecret,\n            CURLOPT_POSTFIELDS =&gt; 'grant_type=client_credentials',\n            CURLOPT_TIMEOUT =&gt; 10\n        ]);\n\n        $response = curl_exec($ch);\n        $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);\n        curl_close($ch);\n\n        if ($httpCode === 200 &amp;&amp; $response) {\n            $data = json_decode($response, true);\n            $this-&gt;accessToken = $data['access_token'];\n            $this-&gt;tokenExpiry = time() + ($data['expires_in'] ?? 86400) - 300;\n            return true;\n        }\n\n        return false;\n    }\n}\n</code></pre>"},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#codigo-de-ejemplo-consulta-de-perfil","title":"C\u00f3digo de Ejemplo - Consulta de Perfil","text":"<pre><code>public function getCharacterProfile($realm, $name) {\n    if (!$this-&gt;authenticate()) {\n        return null;\n    }\n\n    // Verificar cach\u00e9\n    $cacheKey = \"profile_{$realm}_{$name}\";\n    $cached = $this-&gt;getCachedData($cacheKey, 3600);\n    if ($cached !== null) {\n        return $cached;\n    }\n\n    $realm = strtolower(str_replace(' ', '-', $realm));\n    $name = strtolower($name);\n\n    $url = BLIZZARD_API_URL . \"/profile/wow/character/{$realm}/{$name}\";\n    $url .= \"?namespace=profile-\" . BLIZZARD_REGION . \"&amp;locale=\" . BLIZZARD_LOCALE;\n\n    $ch = curl_init($url);\n    curl_setopt_array($ch, [\n        CURLOPT_RETURNTRANSFER =&gt; true,\n        CURLOPT_HTTPHEADER =&gt; ['Authorization: Bearer ' . $this-&gt;accessToken],\n        CURLOPT_TIMEOUT =&gt; 10\n    ]);\n\n    $response = curl_exec($ch);\n    $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);\n    curl_close($ch);\n\n    if ($httpCode === 200) {\n        $data = json_decode($response, true);\n        $this-&gt;setCachedData($cacheKey, $data);\n        return $data;\n    }\n\n    return null;\n}\n</code></pre>"},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#7-sistema-de-seguridad-mejorado-fase-2","title":"7. Sistema de Seguridad Mejorado (Fase 2)","text":""},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#caracteristicas_6","title":"Caracter\u00edsticas","text":"<ul> <li>Validaciones nativas PHP con <code>filter_var()</code></li> <li>Logs de auditor\u00eda autom\u00e1ticos</li> <li>Protecci\u00f3n CSRF en todas las operaciones POST</li> <li>Sanitizaci\u00f3n XSS con <code>htmlspecialchars()</code></li> <li>Control de permisos granular por m\u00f3dulo</li> </ul>"},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#codigo-de-ejemplo-validaciones-nativas","title":"C\u00f3digo de Ejemplo - Validaciones Nativas","text":"<pre><code>// includes/wow_auth.php\n\nfunction validarEmail($email) {\n    $emailLimpio = filter_var($email, FILTER_SANITIZE_EMAIL);\n    return filter_var($emailLimpio, FILTER_VALIDATE_EMAIL) !== false;\n}\n\nfunction validarEntero($valor, $min = null, $max = null) {\n    $opciones = ['options' =&gt; []];\n    if ($min !== null) $opciones['options']['min_range'] = $min;\n    if ($max !== null) $opciones['options']['max_range'] = $max;\n\n    return filter_var($valor, FILTER_VALIDATE_INT, $opciones) !== false;\n}\n\nfunction sanitizarTexto($texto) {\n    $limpio = trim($texto);\n    return htmlspecialchars($limpio, ENT_QUOTES, 'UTF-8');\n}\n\nfunction validarURL($url) {\n    return filter_var($url, FILTER_VALIDATE_URL) !== false;\n}\n</code></pre>"},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#codigo-de-ejemplo-sistema-de-auditoria","title":"C\u00f3digo de Ejemplo - Sistema de Auditor\u00eda","text":"<pre><code>function registrarAccionAuditoria($usuarioId, $modulo, $accion, $detalles = '') {\n    try {\n        $dbPath = __DIR__ . \"/../database/wow.sqlite\";\n        $db = new PDO(\"sqlite:\" . $dbPath);\n        $db-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);\n\n        $stmt = $db-&gt;prepare(\"\n            INSERT INTO audit_log (usuario_id, modulo, accion, detalles, ip_address, timestamp) \n            VALUES (?, ?, ?, ?, ?, ?)\n        \");\n\n        $stmt-&gt;execute([\n            $usuarioId,\n            $modulo,\n            $accion,\n            $detalles,\n            $_SERVER['REMOTE_ADDR'] ?? 'unknown',\n            time()\n        ]);\n\n        return true;\n    } catch (Exception $e) {\n        error_log(\"Error en auditor\u00eda: \" . $e-&gt;getMessage());\n        return false;\n    }\n}\n\nfunction verificarPermisoEscritura($moduloRequerido = 'admin', $nombreModulo = '') {\n    if ($_SERVER['REQUEST_METHOD'] !== 'POST') {\n        return;\n    }\n\n    verificarRol($moduloRequerido);\n\n    if (!isset($_POST['csrf_token'])) {\n        die(\"Error de seguridad: Token CSRF ausente.\");\n    }\n    validarCSRF($_POST['csrf_token']);\n\n    if (!empty($nombreModulo)) {\n        registrarAccionAuditoria(\n            $_SESSION['user']['id'] ?? 0,\n            $nombreModulo,\n            'WRITE',\n            'Operaci\u00f3n de escritura realizada'\n        );\n    }\n}\n</code></pre>"},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#estructura-de-base-de-datos","title":"\ud83d\uddc4\ufe0f Estructura de Base de Datos","text":""},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#tabla-usuarios","title":"Tabla: usuarios","text":"<pre><code>CREATE TABLE usuarios (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    username TEXT UNIQUE NOT NULL,\n    email TEXT NOT NULL,\n    password TEXT NOT NULL,\n    role TEXT DEFAULT 'viewer' CHECK(role IN ('admin', 'tester', 'viewer'))\n);\n</code></pre>"},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#tabla-tester","title":"Tabla: tester","text":"<pre><code>CREATE TABLE tester (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    name TEXT NOT NULL,\n    role TEXT CHECK(role IN ('Tank', 'DPS', 'Healer')),\n    faction TEXT CHECK(faction IN ('Alliance', 'Horde', 'Neutral')),\n    wow_realm TEXT,\n    wow_character TEXT,\n    wow_level INTEGER DEFAULT 0,\n    wow_class TEXT,\n    wow_ilvl INTEGER DEFAULT 0,\n    wow_last_sync INTEGER DEFAULT 0\n);\n</code></pre>"},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#tabla-content","title":"Tabla: content","text":"<pre><code>CREATE TABLE content (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    type TEXT CHECK(type IN ('Raid', 'Dungeon', 'Class', 'Talent')),\n    name TEXT NOT NULL,\n    patch TEXT\n);\n</code></pre>"},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#tabla-test_session","title":"Tabla: test_session","text":"<pre><code>CREATE TABLE test_session (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    tester INTEGER,\n    content INTEGER,\n    time_played TEXT,\n    score INTEGER CHECK(score &gt;= 0 AND score &lt;= 100),\n    difficulty TEXT CHECK(difficulty IN ('Normal', 'Heroic', 'Mythic')),\n    comments TEXT,\n    FOREIGN KEY(tester) REFERENCES tester(id),\n    FOREIGN KEY(content) REFERENCES content(id)\n);\n</code></pre>"},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#tabla-audit_log-fase-2","title":"Tabla: audit_log (Fase 2)","text":"<pre><code>CREATE TABLE audit_log (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    usuario_id INTEGER,\n    modulo TEXT NOT NULL,\n    accion TEXT NOT NULL,\n    detalles TEXT,\n    ip_address TEXT,\n    timestamp INTEGER NOT NULL,\n    FOREIGN KEY(usuario_id) REFERENCES usuarios(id)\n);\n\nCREATE INDEX idx_audit_usuario ON audit_log(usuario_id);\nCREATE INDEX idx_audit_timestamp ON audit_log(timestamp);\nCREATE INDEX idx_audit_modulo ON audit_log(modulo);\n</code></pre>"},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#estructura-del-proyecto","title":"\ud83d\udcc1 Estructura del Proyecto","text":"<pre><code>my_web/\n\u251c\u2500\u2500 admin/                          # P\u00e1ginas de administraci\u00f3n\n\u2502   \u251c\u2500\u2500 wow_dashboard.php           # Dashboard principal\n\u2502   \u251c\u2500\u2500 wow_sesiones.php            # Gesti\u00f3n de sesiones\n\u2502   \u251c\u2500\u2500 wow_testers.php             # Gesti\u00f3n de testers\n\u2502   \u251c\u2500\u2500 wow_contenido.php           # Gesti\u00f3n de contenido\n\u2502   \u251c\u2500\u2500 wow_usuarios.php            # Gesti\u00f3n de usuarios (admin)\n\u2502   \u251c\u2500\u2500 wow_reportes.php            # Reportes y estad\u00edsticas\n\u2502   \u251c\u2500\u2500 wow_reportes_pdf.php        # Generador PDF (Fase 2)\n\u2502   \u251c\u2500\u2500 wow_blizzard_sync.php       # Sincronizaci\u00f3n Blizzard (Fase 2)\n\u2502   \u251c\u2500\u2500 wow_configuracion.php       # Configuraci\u00f3n del sistema\n\u2502   \u2514\u2500\u2500 wow_perfil.php              # Perfil de usuario\n\u251c\u2500\u2500 auth/                           # Autenticaci\u00f3n\n\u2502   \u251c\u2500\u2500 wow_login.php               # P\u00e1gina de login\n\u2502   \u2514\u2500\u2500 wow_logout.php              # Cerrar sesi\u00f3n\n\u251c\u2500\u2500 includes/                       # Archivos de inclusi\u00f3n\n\u2502   \u251c\u2500\u2500 wow_auth.php                # Sistema de autenticaci\u00f3n\n\u2502   \u251c\u2500\u2500 blizzard_config.php         # Configuraci\u00f3n Blizzard API\n\u2502   \u2514\u2500\u2500 blizzard_api.php            # Clase BlizzardAPI\n\u251c\u2500\u2500 assets/                         # Recursos est\u00e1ticos\n\u2502   \u251c\u2500\u2500 wow_style.css               # Estilos CSS\n\u2502   \u251c\u2500\u2500 wow_logo.png                # Logo WoW\n\u2502   \u251c\u2500\u2500 favicon.png                 # Favicon\n\u2502   \u251c\u2500\u2500 tavern.mp3                  # M\u00fasica ambiente\n\u2502   \u2514\u2500\u2500 icon_*.png                  # Iconos del men\u00fa\n\u251c\u2500\u2500 database/                       # Base de datos\n\u2502   \u2514\u2500\u2500 wow.sqlite                  # Base de datos SQLite\n\u251c\u2500\u2500 setup/                          # Scripts de instalaci\u00f3n\n\u2502   \u251c\u2500\u2500 crear_bd_wow.php            # Crear tablas\n\u2502   \u251c\u2500\u2500 insertar_datos_wow.php      # Datos de ejemplo\n\u2502   \u2514\u2500\u2500 crear_tabla_audit.php       # Tabla de auditor\u00eda (Fase 2)\n\u251c\u2500\u2500 cache/                          # Cach\u00e9 de API (Fase 2)\n\u2502   \u2514\u2500\u2500 blizzard/                   # Cach\u00e9 Blizzard API\n\u251c\u2500\u2500 vendor/                         # Dependencias (Fase 2)\n\u2502   \u251c\u2500\u2500 autoload.php                # Autoloader\n\u2502   \u2514\u2500\u2500 tecnickcom/tcpdf/           # Librer\u00eda TCPDF\n\u251c\u2500\u2500 composer.json                   # Configuraci\u00f3n Composer\n\u2514\u2500\u2500 README.md                       # Documentaci\u00f3n\n</code></pre>"},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#diseno-y-experiencia-de-usuario","title":"\ud83c\udfa8 Dise\u00f1o y Experiencia de Usuario","text":""},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#caracteristicas-de-diseno","title":"Caracter\u00edsticas de Dise\u00f1o","text":"<ul> <li>Tem\u00e1tica World of Warcraft consistente en todas las p\u00e1ginas</li> <li>Paleta de colores:</li> <li>Dorado WoW: <code>#ffd100</code></li> <li>Rojo \u00e9pico: <code>#a31414</code></li> <li>Azul raro: <code>#0070dd</code></li> <li>Fondo oscuro: <code>#1a1a1a</code></li> <li>Tipograf\u00edas tem\u00e1ticas:</li> <li><code>Friz Quadrata UI</code> para t\u00edtulos</li> <li><code>Morpheus RPG</code> para valores destacados</li> <li>Cursores personalizados seg\u00fan rol (espada para tester, guantelete para admin)</li> <li>M\u00fasica ambiente de taberna (opcional, controlable)</li> <li>Animaciones suaves en hover y transiciones</li> <li>Responsive design para diferentes tama\u00f1os de pantalla</li> </ul>"},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#codigo-css-de-ejemplo","title":"C\u00f3digo CSS de Ejemplo","text":"<pre><code>/* assets/wow_style.css */\n\n:root {\n    --wow-gold: #ffd100;\n    --wow-red: #a31414;\n    --wow-blue: #0070dd;\n    --bg-dark: #1a1a1a;\n    --bg-panel: #2a2a2a;\n}\n\n.btn-wow.primary {\n    background: linear-gradient(to bottom, var(--wow-gold), #b8860b);\n    color: #000;\n    font-weight: bold;\n    text-shadow: 0 1px 2px rgba(255,255,255,0.3);\n    border: 2px solid #8b6914;\n    transition: all 0.2s ease;\n}\n\n.btn-wow.primary:hover {\n    background: linear-gradient(to bottom, #ffed4e, var(--wow-gold));\n    box-shadow: 0 0 15px rgba(255, 209, 0, 0.6);\n    transform: translateY(-2px);\n}\n\n.panel {\n    background: linear-gradient(to bottom, var(--bg-panel), var(--bg-dark));\n    border: 1px solid #444;\n    border-radius: 4px;\n    padding: 25px;\n    box-shadow: 0 4px 6px rgba(0,0,0,0.5);\n}\n</code></pre>"},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#seguridad-implementada","title":"\ud83d\udd12 Seguridad Implementada","text":""},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#medidas-de-seguridad","title":"Medidas de Seguridad","text":"<ol> <li>Prevenci\u00f3n SQL Injection</li> <li>Uso exclusivo de sentencias preparadas PDO</li> <li> <p>Validaci\u00f3n de tipos de datos</p> </li> <li> <p>Protecci\u00f3n CSRF</p> </li> <li>Tokens \u00fanicos por sesi\u00f3n</li> <li> <p>Validaci\u00f3n en todas las operaciones POST</p> </li> <li> <p>Prevenci\u00f3n XSS</p> </li> <li>Sanitizaci\u00f3n con <code>htmlspecialchars()</code></li> <li> <p>Escapado de todas las salidas</p> </li> <li> <p>Control de Acceso</p> </li> <li>Sistema de roles jer\u00e1rquico</li> <li> <p>Verificaci\u00f3n de permisos en cada p\u00e1gina</p> </li> <li> <p>Protecci\u00f3n de Sesiones</p> </li> <li>Cookies HttpOnly</li> <li>SameSite policy</li> <li> <p>Regeneraci\u00f3n de ID de sesi\u00f3n</p> </li> <li> <p>Anti-Fuerza Bruta</p> </li> <li>L\u00edmite de 5 intentos fallidos</li> <li> <p>Bloqueo temporal de 15 minutos</p> </li> <li> <p>Auditor\u00eda</p> </li> <li>Registro de todas las acciones administrativas</li> <li>Almacenamiento de IP y timestamp</li> </ol>"},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#metricas-del-proyecto","title":"\ud83d\udcca M\u00e9tricas del Proyecto","text":""},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#estadisticas-de-codigo","title":"Estad\u00edsticas de C\u00f3digo","text":"<ul> <li>Archivos PHP: 20+</li> <li>L\u00edneas de c\u00f3digo: ~5,000</li> <li>Tablas de base de datos: 5</li> <li>Funciones de seguridad: 10+</li> <li>P\u00e1ginas de administraci\u00f3n: 10</li> </ul>"},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#funcionalidades","title":"Funcionalidades","text":"<ul> <li>\u2705 Sistema de autenticaci\u00f3n completo</li> <li>\u2705 CRUD para testers, contenido, sesiones, usuarios</li> <li>\u2705 Dashboard con KPIs y gr\u00e1ficos</li> <li>\u2705 Exportaci\u00f3n CSV y PDF</li> <li>\u2705 Integraci\u00f3n Blizzard API</li> <li>\u2705 Sistema de auditor\u00eda</li> <li>\u2705 Validaciones nativas PHP</li> <li>\u2705 Dise\u00f1o responsive</li> <li>\u2705 M\u00fasica ambiente</li> <li>\u2705 Paginaci\u00f3n de resultados</li> </ul>"},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#instalacion-y-configuracion","title":"\ud83d\ude80 Instalaci\u00f3n y Configuraci\u00f3n","text":""},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#requisitos","title":"Requisitos","text":"<ul> <li>PHP 7.4 o superior</li> <li>Apache 2.4+</li> <li>Extensiones PHP: pdo_sqlite, curl, json</li> <li>Composer (para TCPDF)</li> </ul>"},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#pasos-de-instalacion","title":"Pasos de Instalaci\u00f3n","text":"<ol> <li> <p>Copiar proyecto a htdocs <pre><code>xcopy \"d:\\ASIR\\2\u00ba\\IAW\\my_web\" \"C:\\xampp\\htdocs\\my_web\" /E /I /Y\n</code></pre></p> </li> <li> <p>Crear base de datos <pre><code>php setup/crear_bd_wow.php\nphp setup/insertar_datos_wow.php\nphp setup/crear_tabla_audit.php\n</code></pre></p> </li> <li> <p>Instalar dependencias <pre><code>composer install\n</code></pre></p> </li> <li> <p>Configurar Blizzard API (opcional)</p> </li> <li>Editar <code>includes/blizzard_config.php</code></li> <li> <p>A\u00f1adir Client ID y Client Secret</p> </li> <li> <p>Iniciar servidor</p> </li> <li>Iniciar Apache en XAMPP</li> <li>Acceder a: <code>http://localhost/my_web/auth/wow_login.php</code></li> </ol>"},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#credenciales-por-defecto","title":"Credenciales por Defecto","text":"<ul> <li>Usuario: admin</li> <li>Contrase\u00f1a: admin123</li> </ul>"},{"location":"DOCUMENTACION_TECNICA_COMPLETA/#conclusion","title":"\ud83c\udf93 Conclusi\u00f3n","text":"<p>WoW Test Manager es un sistema completo y profesional de gesti\u00f3n de pruebas QA que demuestra:</p> <ul> <li>Dominio de PHP puro sin frameworks</li> <li>Seguridad robusta con m\u00faltiples capas de protecci\u00f3n</li> <li>Integraci\u00f3n de APIs externas con cURL</li> <li>Generaci\u00f3n de documentos profesionales (PDF)</li> <li>Dise\u00f1o UX/UI tem\u00e1tico y atractivo</li> <li>Arquitectura limpia y mantenible</li> <li>Validaci\u00f3n de datos con funciones nativas</li> <li>Sistema de cach\u00e9 para optimizaci\u00f3n</li> </ul> <p>El proyecto est\u00e1 listo para producci\u00f3n y puede ser extendido f\u00e1cilmente con nuevas funcionalidades.</p> <p>Desarrollado por: Alejandro Asignatura: Desarrollo Web (IAW) Fecha: Enero 2026 Versi\u00f3n: 2.0 (Fase 2 completada)</p>"},{"location":"INSTALACION_FASE2/","title":"\ud83d\udce6 Gu\u00eda de Instalaci\u00f3n - Fase 2","text":"<p>Esta gu\u00eda te ayudar\u00e1 a instalar y configurar las nuevas funcionalidades de la Fase 2 del proyecto WoW Test Manager.</p>"},{"location":"INSTALACION_FASE2/#requisitos-previos","title":"\u2705 Requisitos Previos","text":"<p>Antes de comenzar, aseg\u00farate de tener:</p> <ul> <li>PHP 7.4 o superior con las siguientes extensiones:</li> <li><code>pdo_sqlite</code> (ya instalada)</li> <li><code>curl</code> (verificar con: <code>php -m | grep curl</code>)</li> <li> <p><code>json</code> (incluida por defecto)</p> </li> <li> <p>Composer (gestor de dependencias de PHP)</p> </li> <li> <p>Si no lo tienes: https://getcomposer.org/download/</p> </li> <li> <p>Credenciales de Blizzard API (opcional, solo para integraci\u00f3n WoW)</p> </li> <li>Reg\u00edstrate en: https://develop.battle.net/</li> </ul>"},{"location":"INSTALACION_FASE2/#paso-1-crear-tabla-de-auditoria","title":"\ud83d\udd27 Paso 1: Crear Tabla de Auditor\u00eda","text":"<p>Ejecuta el script de creaci\u00f3n de la tabla de auditor\u00eda:</p> <pre><code>php setup/crear_tabla_audit.php\n</code></pre> <p>Deber\u00edas ver: <pre><code>\u2705 Tabla de auditor\u00eda creada correctamente.\n\ud83d\udcca \u00cdndices creados para optimizar consultas.\n</code></pre></p>"},{"location":"INSTALACION_FASE2/#paso-2-instalar-tcpdf-libreria-pdf","title":"\ud83d\udcda Paso 2: Instalar TCPDF (Librer\u00eda PDF)","text":"<p>Desde el directorio ra\u00edz del proyecto (<code>my_web/</code>), ejecuta:</p> <pre><code>composer install\n</code></pre> <p>Esto instalar\u00e1 TCPDF en la carpeta <code>vendor/</code>. Si ves errores, aseg\u00farate de que Composer est\u00e9 instalado correctamente.</p> <p>Verificaci\u00f3n: Deber\u00edas ver una carpeta <code>vendor/</code> con subcarpetas <code>tecnickcom/tcpdf/</code>.</p>"},{"location":"INSTALACION_FASE2/#paso-3-configurar-blizzard-api-opcional","title":"\ud83d\udd0c Paso 3: Configurar Blizzard API (Opcional)","text":"<p>Si deseas usar la integraci\u00f3n con Blizzard API:</p>"},{"location":"INSTALACION_FASE2/#31-obtener-credenciales","title":"3.1. Obtener Credenciales","text":"<ol> <li>Ve a https://develop.battle.net/</li> <li>Inicia sesi\u00f3n con tu cuenta de Battle.net</li> <li>Haz clic en \"Create Client\"</li> <li>Rellena el formulario:</li> <li>Client Name: WoW Test Manager</li> <li>Redirect URLs: http://localhost (o tu dominio)</li> <li>Copia el Client ID y Client Secret</li> </ol>"},{"location":"INSTALACION_FASE2/#32-configurar-credenciales","title":"3.2. Configurar Credenciales","text":"<p>Edita el archivo <code>includes/blizzard_config.php</code>:</p> <pre><code>define('BLIZZARD_CLIENT_ID', 'tu_client_id_real_aqui');\ndefine('BLIZZARD_CLIENT_SECRET', 'tu_client_secret_real_aqui');\n</code></pre>"},{"location":"INSTALACION_FASE2/#33-crear-carpeta-de-cache","title":"3.3. Crear Carpeta de Cach\u00e9","text":"<p>Crea la carpeta para el cach\u00e9 de la API:</p> <pre><code>mkdir cache\nmkdir cache/blizzard\n</code></pre> <p>En Windows: <pre><code>md cache\nmd cache\\blizzard\n</code></pre></p> <p>Aseg\u00farate de que el servidor web tenga permisos de escritura en esta carpeta.</p>"},{"location":"INSTALACION_FASE2/#paso-4-verificar-instalacion","title":"\u2728 Paso 4: Verificar Instalaci\u00f3n","text":""},{"location":"INSTALACION_FASE2/#41-probar-exportacion-pdf","title":"4.1. Probar Exportaci\u00f3n PDF","text":"<ol> <li>Inicia sesi\u00f3n como admin</li> <li>Ve a Reportes en el men\u00fa lateral</li> <li>Haz clic en \"Descargar PDF Profesional\"</li> <li>Deber\u00edas descargar un archivo PDF con el reporte</li> </ol> <p>Si ves un error: Verifica que <code>composer install</code> se ejecut\u00f3 correctamente y que existe la carpeta <code>vendor/</code>.</p>"},{"location":"INSTALACION_FASE2/#42-probar-sincronizacion-blizzard-si-configuraste-la-api","title":"4.2. Probar Sincronizaci\u00f3n Blizzard (si configuraste la API)","text":"<ol> <li>Ve a Blizzard API en el men\u00fa lateral</li> <li>Selecciona un tester</li> <li>Ingresa un realm (ej: \"Ragnaros\") y nombre de personaje real</li> <li>Haz clic en \"Vincular\"</li> <li>Luego haz clic en \"Sincronizar Datos desde Blizzard\"</li> <li>Deber\u00edas ver los datos del personaje (nivel, clase, ilvl)</li> </ol> <p>Si ves errores: - Verifica que las credenciales en <code>blizzard_config.php</code> sean correctas - Aseg\u00farate de que el realm y nombre de personaje existan - Revisa que la extensi\u00f3n <code>curl</code> de PHP est\u00e9 habilitada</p>"},{"location":"INSTALACION_FASE2/#43-verificar-sistema-de-auditoria","title":"4.3. Verificar Sistema de Auditor\u00eda","text":"<ol> <li>Realiza cualquier acci\u00f3n de escritura (crear usuario, sesi\u00f3n, etc.)</li> <li>Los logs se guardar\u00e1n autom\u00e1ticamente en la tabla <code>audit_log</code></li> <li>Puedes verificarlos con una consulta SQL:</li> </ol> <pre><code>SELECT * FROM audit_log ORDER BY timestamp DESC LIMIT 10;\n</code></pre>"},{"location":"INSTALACION_FASE2/#nuevas-funcionalidades-disponibles","title":"\ud83c\udfa8 Nuevas Funcionalidades Disponibles","text":""},{"location":"INSTALACION_FASE2/#sistema-de-seguridad-mejorado","title":"\u2705 Sistema de Seguridad Mejorado","text":"<ul> <li>Validaciones nativas: Todas las entradas usan <code>filter_var()</code> y funciones PHP nativas</li> <li>Logs de auditor\u00eda: Todas las acciones administrativas se registran</li> <li>Control de escritura: Funci\u00f3n <code>verificarPermisoEscritura()</code> protege operaciones POST</li> </ul>"},{"location":"INSTALACION_FASE2/#exportacion-pdf","title":"\u2705 Exportaci\u00f3n PDF","text":"<ul> <li>Bot\u00f3n en Reportes: Junto al CSV, ahora hay opci\u00f3n de PDF</li> <li>Dise\u00f1o profesional: Logo WoW, tablas formateadas, colores tem\u00e1ticos</li> <li>Contenido completo: KPIs, top testers, contenido dif\u00edcil, sesiones recientes</li> </ul>"},{"location":"INSTALACION_FASE2/#integracion-blizzard-api","title":"\u2705 Integraci\u00f3n Blizzard API","text":"<ul> <li>Vinculaci\u00f3n de personajes: Asocia testers con personajes reales de WoW</li> <li>Sincronizaci\u00f3n autom\u00e1tica: Obt\u00e9n nivel, clase, ilvl desde la API oficial</li> <li>Sistema de cach\u00e9: Reduce llamadas a la API (TTL configurable)</li> </ul>"},{"location":"INSTALACION_FASE2/#solucion-de-problemas","title":"\ud83d\udc1b Soluci\u00f3n de Problemas","text":""},{"location":"INSTALACION_FASE2/#error-tcpdf-no-instalado","title":"Error: \"TCPDF no instalado\"","text":"<p>Soluci\u00f3n: Ejecuta <code>composer install</code> en el directorio ra\u00edz.</p>"},{"location":"INSTALACION_FASE2/#error-token-de-blizzard-invalido","title":"Error: \"Token de Blizzard inv\u00e1lido\"","text":"<p>Soluci\u00f3n: Verifica que las credenciales en <code>blizzard_config.php</code> sean correctas.</p>"},{"location":"INSTALACION_FASE2/#error-personaje-no-encontrado","title":"Error: \"Personaje no encontrado\"","text":"<p>Soluci\u00f3n:  - Aseg\u00farate de escribir el realm correctamente (ej: \"Ragnaros\", no \"ragnaros\") - Verifica que el personaje exista en ese realm - Usa el nombre exacto del personaje (sensible a may\u00fasculas)</p>"},{"location":"INSTALACION_FASE2/#error-permission-denied-en-carpeta-cache","title":"Error: \"Permission denied\" en carpeta cache","text":"<p>Soluci\u00f3n:  <pre><code>chmod -R 775 cache/\nchown -R www-data:www-data cache/\n</code></pre></p> <p>En Windows, aseg\u00farate de que el usuario del servidor web tenga permisos de escritura.</p>"},{"location":"INSTALACION_FASE2/#notas-finales","title":"\ud83d\udcdd Notas Finales","text":"<ul> <li>Composer: Solo es necesario ejecutar <code>composer install</code> una vez</li> <li>Credenciales Blizzard: Son opcionales. El sistema funciona sin ellas, solo no podr\u00e1s sincronizar personajes</li> <li>Cach\u00e9: Se limpia autom\u00e1ticamente despu\u00e9s de 7 d\u00edas</li> <li>Auditor\u00eda: Los logs se acumulan. Considera limpiarlos peri\u00f3dicamente</li> </ul>"},{"location":"INSTALACION_FASE2/#documentacion-adicional","title":"\ud83c\udf93 Documentaci\u00f3n Adicional","text":"<ul> <li>Propuesta Fase 2: Ver <code>propuesta_fase2.md</code> para detalles t\u00e9cnicos</li> <li>Blizzard API Docs: https://develop.battle.net/documentation</li> <li>TCPDF Docs: https://tcpdf.org/docs/</li> </ul> <p>\u00a1Instalaci\u00f3n completada! \ud83c\udf89</p> <p>Ahora tienes un sistema completo con integraci\u00f3n API, exportaci\u00f3n PDF profesional y seguridad mejorada, todo usando tecnolog\u00edas nativas de PHP.</p>"},{"location":"implementation_plan/","title":"Plan de Implementaci\u00f3n - Fase 2: WoW Test Manager (Enfoque PHP Nativo)","text":"<p>Adaptaci\u00f3n del proyecto WoW Test Manager para alinearlo con las tecnolog\u00edas y conceptos nativos de PHP, eliminando referencias incorrectas a Node.js/Express y a\u00f1adiendo funcionalidades profesionales solicitadas por el profesor.</p>"},{"location":"implementation_plan/#user-review-required","title":"User Review Required","text":"<p>[!IMPORTANT] Cambios Significativos en la Documentaci\u00f3n Se reescribir\u00e1 completamente la propuesta de Fase 2 para reflejar la realidad del proyecto en PHP puro, eliminando toda referencia a middlewares de Express, express-validator, y estructuras as\u00edncronas propias de Node.js.</p> <p>[!WARNING] Integraci\u00f3n con API Externa La integraci\u00f3n con la Blizzard API requerir\u00e1 credenciales OAuth2. Necesitar\u00e1s registrar una aplicaci\u00f3n en el Blizzard Developer Portal para obtener Client ID y Client Secret.</p>"},{"location":"implementation_plan/#proposed-changes","title":"Proposed Changes","text":""},{"location":"implementation_plan/#documentacion-del-proyecto","title":"Documentaci\u00f3n del Proyecto","text":""},{"location":"implementation_plan/#new-propuesta_fase2md","title":"[NEW] propuesta_fase2.md","text":"<p>Documento nuevo que reemplazar\u00e1 cualquier propuesta anterior. Incluir\u00e1:</p> <ul> <li>Contexto del Proyecto: Descripci\u00f3n del sistema actual en PHP puro con SQLite</li> <li>Tecnolog\u00edas Utilizadas: PHP 7.4+, PDO, SQLite, cURL para APIs externas</li> <li>Objetivos de Fase 2:</li> <li>Integraci\u00f3n Blizzard API: Usando cURL nativo de PHP para consultar datos de personajes</li> <li>Mejoras de Seguridad: Perfeccionamiento del sistema de control de acceso en <code>wow_auth.php</code></li> <li>Reportes Profesionales: Exportaci\u00f3n a PDF usando TCPDF adem\u00e1s del CSV existente</li> <li>Justificaci\u00f3n T\u00e9cnica: Por qu\u00e9 cada tecnolog\u00eda es apropiada para PHP</li> </ul>"},{"location":"implementation_plan/#modify-readmemd","title":"[MODIFY] README.md","text":"<p>Actualizar la secci\u00f3n de caracter\u00edsticas de seguridad para ser m\u00e1s espec\u00edfica sobre la implementaci\u00f3n PHP:</p> <ul> <li>Cambiar \"Tokens CSRF\" por \"Protecci\u00f3n CSRF manual con tokens de sesi\u00f3n\"</li> <li>A\u00f1adir secci\u00f3n sobre el sistema de control de acceso basado en funciones PHP</li> <li>Documentar el uso de <code>filter_var()</code> para validaciones</li> <li>Explicar la estructura de roles jer\u00e1rquicos implementada</li> </ul>"},{"location":"implementation_plan/#sistema-de-integracion-con-blizzard-api","title":"Sistema de Integraci\u00f3n con Blizzard API","text":""},{"location":"implementation_plan/#new-includesblizzard_apiphp","title":"[NEW] includes/blizzard_api.php","text":"<p>M\u00f3dulo completo para interactuar con la Blizzard API usando cURL:</p> <pre><code>class BlizzardAPI {\n    private $clientId;\n    private $clientSecret;\n    private $accessToken;\n    private $region = 'eu';\n\n    // Autenticaci\u00f3n OAuth2\n    public function authenticate() { /* cURL para obtener token */ }\n\n    // Consultar perfil de personaje\n    public function getCharacterProfile($realm, $name) { /* cURL GET */ }\n\n    // Obtener equipamiento\n    public function getCharacterEquipment($realm, $name) { /* cURL GET */ }\n\n    // Sistema de cach\u00e9 simple con archivos\n    private function getCachedData($key) { /* leer cache */ }\n    private function setCachedData($key, $data, $ttl = 3600) { /* guardar cache */ }\n}\n</code></pre> <p>Caracter\u00edsticas: - Autenticaci\u00f3n OAuth2 con cURL - Manejo de errores HTTP (401, 404, 500) - Sistema de cach\u00e9 en archivos para reducir llamadas API - Timeouts configurables - Logs de errores</p>"},{"location":"implementation_plan/#new-adminwow_blizzard_syncphp","title":"[NEW] admin/wow_blizzard_sync.php","text":"<p>Interfaz administrativa para sincronizar datos de testers con la API de Blizzard:</p> <ul> <li>Formulario para vincular tester con personaje de WoW (realm + nombre)</li> <li>Bot\u00f3n para sincronizar datos manualmente</li> <li>Visualizaci\u00f3n de \u00faltima sincronizaci\u00f3n</li> <li>Mostrar nivel, clase, ilvl del personaje</li> </ul>"},{"location":"implementation_plan/#modify-adminwow_testersphp","title":"[MODIFY] admin/wow_testers.php","text":"<p>A\u00f1adir columnas opcionales para datos de Blizzard: - Icono de clase de WoW - Nivel de personaje - Item level - Enlace a perfil en Blizzard</p>"},{"location":"implementation_plan/#mejoras-del-sistema-de-seguridad","title":"Mejoras del Sistema de Seguridad","text":""},{"location":"implementation_plan/#modify-includeswow_authphp","title":"[MODIFY] includes/wow_auth.php","text":"<p>Perfeccionar el sistema de control de acceso existente:</p> <ol> <li> <p>Nueva funci\u00f3n <code>verificarPermisoEscritura()</code>:    <pre><code>function verificarPermisoEscritura($modulo) {\n    if ($_SERVER['REQUEST_METHOD'] === 'POST') {\n        verificarRol('admin'); // Solo admins pueden escribir\n        registrarAccion($modulo, 'WRITE');\n    }\n}\n</code></pre></p> </li> <li> <p>Sistema de logs de acciones:    <pre><code>function registrarAccion($modulo, $tipo) {\n    // Guardar en tabla audit_log\n}\n</code></pre></p> </li> <li> <p>Validaciones mejoradas:    <pre><code>function validarEmail($email) {\n    return filter_var($email, FILTER_VALIDATE_EMAIL);\n}\n\nfunction sanitizarTexto($texto) {\n    return htmlspecialchars(trim($texto), ENT_QUOTES, 'UTF-8');\n}\n</code></pre></p> </li> </ol>"},{"location":"implementation_plan/#new-setupcrear_tabla_auditphp","title":"[NEW] setup/crear_tabla_audit.php","text":"<p>Script para crear tabla de auditor\u00eda: <pre><code>CREATE TABLE audit_log (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    usuario_id INTEGER,\n    modulo TEXT,\n    accion TEXT,\n    ip_address TEXT,\n    timestamp INTEGER\n);\n</code></pre></p>"},{"location":"implementation_plan/#sistema-de-exportacion-a-pdf","title":"Sistema de Exportaci\u00f3n a PDF","text":""},{"location":"implementation_plan/#new-adminwow_reportes_pdfphp","title":"[NEW] admin/wow_reportes_pdf.php","text":"<p>Generador de reportes en PDF usando TCPDF:</p> <ul> <li>Portada: Logo WoW, t\u00edtulo del reporte, fecha</li> <li>Resumen Ejecutivo: KPIs principales con iconos</li> <li>Tablas de Datos: </li> <li>Mejores testers por score</li> <li>Contenido m\u00e1s dif\u00edcil</li> <li>Sesiones recientes</li> <li>Gr\u00e1ficos: Exportar gr\u00e1ficos de Chart.js como im\u00e1genes y embeber en PDF</li> <li>Footer: Paginaci\u00f3n y marca de agua</li> </ul> <p>Estructura del c\u00f3digo: <pre><code>require_once('../vendor/tcpdf/tcpdf.php');\n\nclass WoWReportPDF extends TCPDF {\n    public function Header() { /* Logo y t\u00edtulo */ }\n    public function Footer() { /* Paginaci\u00f3n */ }\n}\n\n// Generar PDF\n$pdf = new WoWReportPDF();\n$pdf-&gt;AddPage();\n$pdf-&gt;generarPortada();\n$pdf-&gt;generarResumen($stats);\n$pdf-&gt;generarTablas($data);\n$pdf-&gt;Output('reporte_wow.pdf', 'D');\n</code></pre></p>"},{"location":"implementation_plan/#modify-adminwow_reportesphp","title":"[MODIFY] admin/wow_reportes.php","text":"<p>A\u00f1adir bot\u00f3n de exportaci\u00f3n a PDF junto al CSV existente:</p> <pre><code>&lt;div style=\"margin-bottom:30px; display: flex; gap: 10px;\"&gt;\n    &lt;a href=\"?export=csv\" class=\"btn-wow primary\"&gt;\n        &lt;i class=\"fa-solid fa-file-csv\"&gt;&lt;/i&gt; Descargar CSV\n    &lt;/a&gt;\n    &lt;a href=\"wow_reportes_pdf.php\" class=\"btn-wow secondary\"&gt;\n        &lt;i class=\"fa-solid fa-file-pdf\"&gt;&lt;/i&gt; Descargar PDF Profesional\n    &lt;/a&gt;\n&lt;/div&gt;\n</code></pre>"},{"location":"implementation_plan/#instalacion-de-dependencias","title":"Instalaci\u00f3n de Dependencias","text":""},{"location":"implementation_plan/#new-composerjson","title":"[NEW] composer.json","text":"<p>Archivo de configuraci\u00f3n para instalar TCPDF v\u00eda Composer:</p> <pre><code>{\n    \"require\": {\n        \"tecnickcom/tcpdf\": \"^6.6\"\n    }\n}\n</code></pre> <p>Comando a ejecutar: <code>composer install</code></p>"},{"location":"implementation_plan/#verification-plan","title":"Verification Plan","text":""},{"location":"implementation_plan/#automated-tests","title":"Automated Tests","text":"<p>No existen tests automatizados en el proyecto actual. La verificaci\u00f3n ser\u00e1 manual y funcional.</p>"},{"location":"implementation_plan/#manual-verification","title":"Manual Verification","text":""},{"location":"implementation_plan/#1-verificar-documentacion-actualizada","title":"1. Verificar Documentaci\u00f3n Actualizada","text":"<p>Pasos: 1. Abrir <code>propuesta_fase2.md</code> y verificar que:    - No menciona \"middlewares de Express\"    - No menciona \"express-validator\"    - No menciona \"estructura as\u00edncrona\"    - Describe correctamente el uso de cURL para APIs    - Menciona <code>filter_var()</code> para validaciones    - Explica el sistema de control de acceso con <code>verificarRol()</code></p> <ol> <li>Revisar <code>README.md</code> actualizado para confirmar terminolog\u00eda PHP correcta</li> </ol>"},{"location":"implementation_plan/#2-probar-integracion-blizzard-api","title":"2. Probar Integraci\u00f3n Blizzard API","text":"<p>Prerequisitos: - Obtener credenciales de Blizzard Developer Portal - Configurar Client ID y Secret en archivo de configuraci\u00f3n</p> <p>Pasos: 1. Acceder a <code>admin/wow_blizzard_sync.php</code> 2. Vincular un tester con un personaje real de WoW (ej: \"Thrall\" en \"Ragnaros-EU\") 3. Hacer clic en \"Sincronizar Datos\" 4. Verificar que se muestran:    - Nivel del personaje    - Clase con icono correcto    - Item level    - \u00daltima sincronizaci\u00f3n</p> <p>Resultado Esperado: Datos del personaje se muestran correctamente sin errores de cURL</p>"},{"location":"implementation_plan/#3-validar-mejoras-de-seguridad","title":"3. Validar Mejoras de Seguridad","text":"<p>Pasos: 1. Iniciar sesi\u00f3n como usuario con rol <code>tester</code> 2. Intentar acceder directamente a <code>wow_usuarios.php</code> (solo admin) 3. Verificar mensaje: \"Acceso Denegado - No tienes nivel suficiente\" 4. Intentar hacer POST a <code>wow_sesiones.php</code> sin token CSRF 5. Verificar mensaje de error CSRF 6. Iniciar sesi\u00f3n como <code>admin</code> 7. Crear un nuevo usuario 8. Verificar que se registr\u00f3 la acci\u00f3n en <code>audit_log</code></p> <p>Resultado Esperado: Sistema de permisos funciona correctamente y se registran acciones</p>"},{"location":"implementation_plan/#4-probar-exportacion-pdf","title":"4. Probar Exportaci\u00f3n PDF","text":"<p>Pasos: 1. Acceder a <code>admin/wow_reportes.php</code> como admin 2. Hacer clic en \"Descargar PDF Profesional\" 3. Verificar que se descarga un archivo PDF 4. Abrir el PDF y confirmar:    - Portada con logo WoW    - Resumen con KPIs    - Tabla de mejores testers    - Tabla de contenido dif\u00edcil    - Gr\u00e1ficos (si es posible)    - Footer con paginaci\u00f3n</p> <p>Resultado Esperado: PDF se genera correctamente con dise\u00f1o profesional tem\u00e1tico de WoW</p>"},{"location":"implementation_plan/#5-comparar-csv-vs-pdf","title":"5. Comparar CSV vs PDF","text":"<p>Pasos: 1. Descargar reporte en CSV 2. Descargar reporte en PDF 3. Verificar que ambos contienen los mismos datos 4. Confirmar que PDF tiene mejor presentaci\u00f3n visual</p> <p>Resultado Esperado: Ambos formatos disponibles, PDF m\u00e1s profesional</p>"},{"location":"implementation_plan/#notas-adicionales","title":"Notas Adicionales","text":"<ul> <li>Composer: Si no est\u00e1 instalado, se puede descargar de getcomposer.org</li> <li>Credenciales Blizzard: Registrarse en develop.battle.net</li> <li>TCPDF: Librer\u00eda PHP nativa, no requiere extensiones adicionales</li> <li>Cach\u00e9 API: Se guardar\u00e1 en carpeta <code>cache/</code> (crear con permisos de escritura)</li> </ul>"},{"location":"propuesta_fase2/","title":"Propuesta Fase 2 - WoW Test Manager","text":""},{"location":"propuesta_fase2/#sistema-de-gestion-de-pruebas-qa-con-integracion-blizzard-api","title":"Sistema de Gesti\u00f3n de Pruebas QA con Integraci\u00f3n Blizzard API","text":""},{"location":"propuesta_fase2/#contexto-del-proyecto","title":"\ud83d\udccb Contexto del Proyecto","text":"<p>WoW Test Manager es un sistema de gesti\u00f3n de pruebas de calidad (QA) desarrollado completamente en PHP puro con base de datos SQLite. El proyecto utiliza tecnolog\u00edas nativas de PHP para implementar un panel de administraci\u00f3n robusto y seguro con tem\u00e1tica de World of Warcraft.</p>"},{"location":"propuesta_fase2/#tecnologias-actuales-implementadas","title":"Tecnolog\u00edas Actuales Implementadas","text":"<ul> <li>Backend: PHP 7.4+ con PDO (PHP Data Objects)</li> <li>Base de Datos: SQLite 3 con sentencias preparadas</li> <li>Seguridad: Sistema de autenticaci\u00f3n manual con CSRF tokens y control de acceso basado en roles</li> <li>Frontend: HTML5, CSS3 vanilla, JavaScript nativo</li> <li>Visualizaci\u00f3n: Chart.js para gr\u00e1ficos estad\u00edsticos</li> </ul>"},{"location":"propuesta_fase2/#objetivos-de-la-fase-2","title":"\ud83c\udfaf Objetivos de la Fase 2","text":"<p>La Fase 2 se centra en tres pilares fundamentales que elevar\u00e1n el proyecto a un nivel profesional:</p>"},{"location":"propuesta_fase2/#1-integracion-con-blizzard-api-curl","title":"1. Integraci\u00f3n con Blizzard API (cURL)","text":""},{"location":"propuesta_fase2/#2-perfeccionamiento-del-sistema-de-seguridad","title":"2. Perfeccionamiento del Sistema de Seguridad","text":""},{"location":"propuesta_fase2/#3-sistema-de-reportes-profesionales-pdf","title":"3. Sistema de Reportes Profesionales (PDF)","text":""},{"location":"propuesta_fase2/#1-integracion-con-blizzard-api-usando-curl","title":"\ud83d\udd0c 1. Integraci\u00f3n con Blizzard API usando cURL","text":""},{"location":"propuesta_fase2/#objetivo","title":"Objetivo","text":"<p>Conectar el sistema con la Blizzard Battle.net API para obtener datos reales de personajes de World of Warcraft y vincularlos con los testers del sistema.</p>"},{"location":"propuesta_fase2/#implementacion-tecnica","title":"Implementaci\u00f3n T\u00e9cnica","text":""},{"location":"propuesta_fase2/#autenticacion-oauth2-con-curl","title":"Autenticaci\u00f3n OAuth2 con cURL","text":"<p>La Blizzard API requiere autenticaci\u00f3n OAuth2. Implementaremos el flujo de credenciales de cliente usando cURL nativo de PHP:</p> <pre><code>function obtenerTokenBlizzard($clientId, $clientSecret) {\n    $url = \"https://oauth.battle.net/token\";\n\n    $ch = curl_init($url);\n    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);\n    curl_setopt($ch, CURLOPT_POST, true);\n    curl_setopt($ch, CURLOPT_USERPWD, \"$clientId:$clientSecret\");\n    curl_setopt($ch, CURLOPT_POSTFIELDS, \"grant_type=client_credentials\");\n    curl_setopt($ch, CURLOPT_TIMEOUT, 10);\n\n    $response = curl_exec($ch);\n    $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);\n    curl_close($ch);\n\n    if ($httpCode === 200) {\n        $data = json_decode($response, true);\n        return $data['access_token'];\n    }\n    return false;\n}\n</code></pre>"},{"location":"propuesta_fase2/#consulta-de-datos-de-personajes","title":"Consulta de Datos de Personajes","text":"<p>Una vez autenticados, consultaremos el perfil de personajes usando endpoints de la API:</p> <pre><code>function obtenerPerfilPersonaje($realm, $nombre, $token) {\n    $url = \"https://eu.api.blizzard.com/profile/wow/character/\" \n         . urlencode($realm) . \"/\" . urlencode(strtolower($nombre))\n         . \"?namespace=profile-eu&amp;locale=es_ES\";\n\n    $ch = curl_init($url);\n    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);\n    curl_setopt($ch, CURLOPT_HTTPHEADER, [\n        \"Authorization: Bearer $token\"\n    ]);\n    curl_setopt($ch, CURLOPT_TIMEOUT, 10);\n\n    $response = curl_exec($ch);\n    $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);\n    curl_close($ch);\n\n    if ($httpCode === 200) {\n        return json_decode($response, true);\n    }\n    return null;\n}\n</code></pre>"},{"location":"propuesta_fase2/#sistema-de-cache","title":"Sistema de Cach\u00e9","text":"<p>Para evitar llamadas excesivas a la API (l\u00edmite de rate limiting), implementaremos un sistema de cach\u00e9 simple con archivos:</p> <pre><code>function obtenerDatosConCache($clave, $callable, $ttl = 3600) {\n    $cacheDir = __DIR__ . '/../cache/';\n    $cacheFile = $cacheDir . md5($clave) . '.cache';\n\n    // Verificar si existe cach\u00e9 v\u00e1lida\n    if (file_exists($cacheFile) &amp;&amp; (time() - filemtime($cacheFile)) &lt; $ttl) {\n        return json_decode(file_get_contents($cacheFile), true);\n    }\n\n    // Obtener datos frescos\n    $datos = $callable();\n\n    // Guardar en cach\u00e9\n    if ($datos !== null) {\n        file_put_contents($cacheFile, json_encode($datos));\n    }\n\n    return $datos;\n}\n</code></pre>"},{"location":"propuesta_fase2/#funcionalidades-a-implementar","title":"Funcionalidades a Implementar","text":"<ol> <li>M\u00f3dulo de Sincronizaci\u00f3n (<code>admin/wow_blizzard_sync.php</code>):</li> <li>Formulario para vincular tester con personaje WoW</li> <li>Campos: Realm, Nombre de personaje</li> <li>Bot\u00f3n \"Sincronizar Datos\"</li> <li> <p>Visualizaci\u00f3n de \u00faltima sincronizaci\u00f3n</p> </li> <li> <p>Datos a Mostrar:</p> </li> <li>Nivel del personaje</li> <li>Clase (con icono correspondiente)</li> <li>Raza</li> <li>Item Level (ilvl)</li> <li> <p>Facci\u00f3n (Alianza/Horda)</p> </li> <li> <p>Integraci\u00f3n en Testers:</p> </li> <li>A\u00f1adir columnas en <code>admin/wow_testers.php</code></li> <li>Mostrar avatar de clase</li> <li>Enlace al perfil en Blizzard Armory</li> </ol>"},{"location":"propuesta_fase2/#manejo-de-errores","title":"Manejo de Errores","text":"<pre><code>// Validaci\u00f3n de respuestas HTTP\nswitch ($httpCode) {\n    case 200:\n        // \u00c9xito\n        break;\n    case 401:\n        error_log(\"Token de Blizzard expirado o inv\u00e1lido\");\n        break;\n    case 404:\n        error_log(\"Personaje no encontrado: $realm/$nombre\");\n        break;\n    case 429:\n        error_log(\"Rate limit excedido en Blizzard API\");\n        break;\n    default:\n        error_log(\"Error desconocido en Blizzard API: $httpCode\");\n}\n</code></pre>"},{"location":"propuesta_fase2/#2-perfeccionamiento-del-sistema-de-seguridad_1","title":"\ud83d\udee1\ufe0f 2. Perfeccionamiento del Sistema de Seguridad","text":""},{"location":"propuesta_fase2/#situacion-actual","title":"Situaci\u00f3n Actual","text":"<p>El proyecto ya cuenta con un sistema de seguridad robusto implementado en <code>includes/wow_auth.php</code>:</p> <ul> <li>\u2705 Protecci\u00f3n CSRF manual con tokens de sesi\u00f3n</li> <li>\u2705 Sistema de roles jer\u00e1rquicos: <code>viewer &lt; tester &lt; admin</code></li> <li>\u2705 Funciones de control de acceso: <code>verificarLogin()</code> y <code>verificarRol()</code></li> <li>\u2705 Protecci\u00f3n anti-fuerza bruta (5 intentos, bloqueo de 15 minutos)</li> <li>\u2705 PDO con sentencias preparadas (prevenci\u00f3n de SQL Injection)</li> <li>\u2705 Sesiones blindadas con cookies <code>HttpOnly</code></li> </ul>"},{"location":"propuesta_fase2/#mejoras-propuestas","title":"Mejoras Propuestas","text":""},{"location":"propuesta_fase2/#a-blindaje-de-acciones-de-escritura-post","title":"A. Blindaje de Acciones de Escritura (POST)","text":"<p>Crear una funci\u00f3n espec\u00edfica para proteger todas las operaciones de escritura:</p> <pre><code>function verificarPermisoEscritura($moduloRequerido = 'admin') {\n    // Verificar que sea una petici\u00f3n POST\n    if ($_SERVER['REQUEST_METHOD'] !== 'POST') {\n        return;\n    }\n\n    // Verificar rol m\u00ednimo\n    verificarRol($moduloRequerido);\n\n    // Validar token CSRF\n    if (!isset($_POST['csrf_token'])) {\n        die(\"Error de seguridad: Token CSRF ausente\");\n    }\n    validarCSRF($_POST['csrf_token']);\n\n    // Registrar acci\u00f3n en log de auditor\u00eda\n    registrarAccionAuditoria($_SESSION['user']['id'], $moduloRequerido, 'WRITE');\n}\n</code></pre> <p>Uso en formularios:</p> <pre><code>// En wow_usuarios.php, wow_sesiones.php, etc.\nif ($_SERVER['REQUEST_METHOD'] === 'POST') {\n    verificarPermisoEscritura('admin');\n    // ... resto del c\u00f3digo de inserci\u00f3n/actualizaci\u00f3n\n}\n</code></pre>"},{"location":"propuesta_fase2/#b-sistema-de-logs-de-auditoria","title":"B. Sistema de Logs de Auditor\u00eda","text":"<p>Crear tabla para registrar acciones administrativas:</p> <pre><code>CREATE TABLE audit_log (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    usuario_id INTEGER,\n    modulo TEXT,\n    accion TEXT,\n    detalles TEXT,\n    ip_address TEXT,\n    timestamp INTEGER,\n    FOREIGN KEY(usuario_id) REFERENCES usuarios(id)\n);\n</code></pre> <p>Funci\u00f3n de registro:</p> <pre><code>function registrarAccionAuditoria($usuarioId, $modulo, $accion, $detalles = '') {\n    global $db;\n\n    $stmt = $db-&gt;prepare(\n        \"INSERT INTO audit_log (usuario_id, modulo, accion, detalles, ip_address, timestamp) \n         VALUES (?, ?, ?, ?, ?, ?)\"\n    );\n\n    $stmt-&gt;execute([\n        $usuarioId,\n        $modulo,\n        $accion,\n        $detalles,\n        $_SERVER['REMOTE_ADDR'],\n        time()\n    ]);\n}\n</code></pre>"},{"location":"propuesta_fase2/#c-validaciones-con-funciones-nativas-de-php","title":"C. Validaciones con Funciones Nativas de PHP","text":"<p>Reemplazar validaciones manuales por funciones nativas de PHP:</p> <pre><code>// Validaci\u00f3n de email\nfunction validarEmail($email) {\n    $emailLimpio = filter_var($email, FILTER_SANITIZE_EMAIL);\n    return filter_var($emailLimpio, FILTER_VALIDATE_EMAIL) !== false;\n}\n\n// Validaci\u00f3n de enteros\nfunction validarEntero($valor, $min = null, $max = null) {\n    $opciones = ['options' =&gt; []];\n    if ($min !== null) $opciones['options']['min_range'] = $min;\n    if ($max !== null) $opciones['options']['max_range'] = $max;\n\n    return filter_var($valor, FILTER_VALIDATE_INT, $opciones) !== false;\n}\n\n// Sanitizaci\u00f3n de texto\nfunction sanitizarTexto($texto) {\n    $limpio = trim($texto);\n    return htmlspecialchars($limpio, ENT_QUOTES, 'UTF-8');\n}\n\n// Validaci\u00f3n de URL\nfunction validarURL($url) {\n    return filter_var($url, FILTER_VALIDATE_URL) !== false;\n}\n</code></pre> <p>Uso en formularios:</p> <pre><code>// En wow_usuarios.php\nif ($_SERVER['REQUEST_METHOD'] === 'POST') {\n    verificarPermisoEscritura('admin');\n\n    $username = sanitizarTexto($_POST['username'] ?? '');\n    $email = $_POST['email'] ?? '';\n\n    if (!validarEmail($email)) {\n        $error = \"Email inv\u00e1lido\";\n    } elseif (strlen($username) &lt; 3) {\n        $error = \"El nombre de usuario debe tener al menos 3 caracteres\";\n    } else {\n        // Procesar inserci\u00f3n...\n    }\n}\n</code></pre>"},{"location":"propuesta_fase2/#d-panel-de-auditoria-solo-admin","title":"D. Panel de Auditor\u00eda (Solo Admin)","text":"<p>Crear <code>admin/wow_auditoria.php</code> para visualizar el log de acciones:</p> <ul> <li>Tabla con: Usuario, M\u00f3dulo, Acci\u00f3n, IP, Fecha/Hora</li> <li>Filtros por usuario, m\u00f3dulo, rango de fechas</li> <li>Paginaci\u00f3n</li> <li>Exportaci\u00f3n a CSV</li> </ul>"},{"location":"propuesta_fase2/#3-sistema-de-reportes-profesionales-pdf_1","title":"\ud83d\udcca 3. Sistema de Reportes Profesionales (PDF)","text":""},{"location":"propuesta_fase2/#situacion-actual_1","title":"Situaci\u00f3n Actual","text":"<p>El sistema ya cuenta con exportaci\u00f3n a CSV en <code>admin/wow_reportes.php</code>:</p> <pre><code>if (isset($_GET['export'])) {\n    header('Content-Type: text/csv; charset=utf-8');\n    header('Content-Disposition: attachment; filename=reporte_wow.csv');\n    $output = fopen('php://output', 'w');\n    fputcsv($output, ['ID', 'Tester', 'Contenido', 'Dificultad', 'Score', 'Horas', 'Comentarios']);\n    // ... exportar datos\n}\n</code></pre>"},{"location":"propuesta_fase2/#mejora-exportacion-a-pdf-con-tcpdf","title":"Mejora: Exportaci\u00f3n a PDF con TCPDF","text":""},{"location":"propuesta_fase2/#instalacion-de-tcpdf","title":"Instalaci\u00f3n de TCPDF","text":"<p>Usar Composer para instalar la librer\u00eda TCPDF (100% PHP, sin dependencias externas):</p> <pre><code>composer require tecnickcom/tcpdf\n</code></pre> <p>Archivo <code>composer.json</code>:</p> <pre><code>{\n    \"require\": {\n        \"tecnickcom/tcpdf\": \"^6.6\"\n    }\n}\n</code></pre>"},{"location":"propuesta_fase2/#implementacion-del-generador-pdf","title":"Implementaci\u00f3n del Generador PDF","text":"<p>Crear <code>admin/wow_reportes_pdf.php</code>:</p> <pre><code>&lt;?php\nrequire_once __DIR__ . '/../includes/wow_auth.php';\nverificarLogin();\nverificarRol('admin');\n\nrequire_once __DIR__ . '/../vendor/autoload.php';\n\n// Clase personalizada para el PDF\nclass WoWReportPDF extends TCPDF {\n    public function Header() {\n        // Logo WoW\n        $this-&gt;Image(__DIR__ . '/../assets/wow_logo.png', 15, 10, 30);\n\n        // T\u00edtulo\n        $this-&gt;SetFont('helvetica', 'B', 16);\n        $this-&gt;SetTextColor(255, 209, 0); // Dorado WoW\n        $this-&gt;Cell(0, 15, 'WoW Test Manager - Reporte de Sesiones', 0, false, 'C', 0, '', 0, false, 'M', 'M');\n        $this-&gt;Ln(10);\n    }\n\n    public function Footer() {\n        $this-&gt;SetY(-15);\n        $this-&gt;SetFont('helvetica', 'I', 8);\n        $this-&gt;SetTextColor(128, 128, 128);\n        $this-&gt;Cell(0, 10, 'P\u00e1gina ' . $this-&gt;getAliasNumPage() . ' de ' . $this-&gt;getAliasNbPages(), 0, false, 'C');\n    }\n}\n\n// Obtener datos\n$db = new PDO(\"sqlite:\" . __DIR__ . \"/../database/wow.sqlite\");\n$db-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);\n\n$totalSesiones = $db-&gt;query(\"SELECT COUNT(*) FROM test_session\")-&gt;fetchColumn();\n$promedioScore = $db-&gt;query(\"SELECT AVG(score) FROM test_session\")-&gt;fetchColumn();\n$topTesters = $db-&gt;query(\"SELECT t.name, AVG(s.score) as prom FROM test_session s JOIN tester t ON s.tester=t.id GROUP BY t.name ORDER BY prom DESC LIMIT 5\")-&gt;fetchAll(PDO::FETCH_ASSOC);\n\n// Crear PDF\n$pdf = new WoWReportPDF(PDF_PAGE_ORIENTATION, PDF_UNIT, PDF_PAGE_FORMAT, true, 'UTF-8', false);\n\n$pdf-&gt;SetCreator('WoW Test Manager');\n$pdf-&gt;SetAuthor('Admin');\n$pdf-&gt;SetTitle('Reporte de Sesiones QA');\n$pdf-&gt;SetSubject('Estad\u00edsticas de Testing');\n\n$pdf-&gt;setPrintHeader(true);\n$pdf-&gt;setPrintFooter(true);\n$pdf-&gt;SetMargins(15, 30, 15);\n$pdf-&gt;SetAutoPageBreak(TRUE, 25);\n\n$pdf-&gt;AddPage();\n\n// Portada\n$pdf-&gt;SetFont('helvetica', 'B', 24);\n$pdf-&gt;SetTextColor(255, 209, 0);\n$pdf-&gt;Cell(0, 20, 'Reporte Ejecutivo', 0, 1, 'C');\n$pdf-&gt;SetFont('helvetica', '', 12);\n$pdf-&gt;SetTextColor(0, 0, 0);\n$pdf-&gt;Cell(0, 10, 'Fecha: ' . date('d/m/Y H:i'), 0, 1, 'C');\n$pdf-&gt;Ln(20);\n\n// Resumen KPIs\n$pdf-&gt;SetFont('helvetica', 'B', 14);\n$pdf-&gt;Cell(0, 10, 'Resumen Ejecutivo', 0, 1, 'L');\n$pdf-&gt;SetFont('helvetica', '', 11);\n$pdf-&gt;Cell(0, 8, 'Total de Sesiones: ' . $totalSesiones, 0, 1);\n$pdf-&gt;Cell(0, 8, 'Score Promedio Global: ' . round($promedioScore, 2), 0, 1);\n$pdf-&gt;Ln(10);\n\n// Tabla de Top Testers\n$pdf-&gt;SetFont('helvetica', 'B', 14);\n$pdf-&gt;Cell(0, 10, 'Top 5 Testers por Calidad', 0, 1, 'L');\n\n$pdf-&gt;SetFillColor(42, 42, 42);\n$pdf-&gt;SetTextColor(255, 209, 0);\n$pdf-&gt;SetFont('helvetica', 'B', 10);\n$pdf-&gt;Cell(100, 7, 'Tester', 1, 0, 'L', true);\n$pdf-&gt;Cell(80, 7, 'Score Promedio', 1, 1, 'C', true);\n\n$pdf-&gt;SetTextColor(0, 0, 0);\n$pdf-&gt;SetFont('helvetica', '', 10);\nforeach ($topTesters as $tester) {\n    $pdf-&gt;Cell(100, 6, $tester['name'], 1, 0, 'L');\n    $pdf-&gt;Cell(80, 6, round($tester['prom'], 2), 1, 1, 'C');\n}\n\n// Salida del PDF\n$pdf-&gt;Output('reporte_wow_' . date('Ymd') . '.pdf', 'D');\n?&gt;\n</code></pre>"},{"location":"propuesta_fase2/#integracion-en-la-interfaz","title":"Integraci\u00f3n en la Interfaz","text":"<p>Modificar <code>admin/wow_reportes.php</code> para a\u00f1adir el bot\u00f3n de PDF:</p> <pre><code>&lt;div style=\"margin-bottom:30px; display: flex; gap: 10px;\"&gt;\n    &lt;a href=\"?export=1\" class=\"btn-wow primary\"&gt;\n        &lt;i class=\"fa-solid fa-file-csv\"&gt;&lt;/i&gt; Descargar CSV Completo\n    &lt;/a&gt;\n    &lt;a href=\"wow_reportes_pdf.php\" class=\"btn-wow secondary\"&gt;\n        &lt;i class=\"fa-solid fa-file-pdf\"&gt;&lt;/i&gt; Descargar PDF Profesional\n    &lt;/a&gt;\n&lt;/div&gt;\n</code></pre>"},{"location":"propuesta_fase2/#caracteristicas-del-pdf","title":"Caracter\u00edsticas del PDF","text":"<ol> <li>Portada Profesional:</li> <li>Logo de WoW</li> <li>T\u00edtulo del reporte</li> <li> <p>Fecha y hora de generaci\u00f3n</p> </li> <li> <p>Resumen Ejecutivo:</p> </li> <li>KPIs principales (Total sesiones, Score promedio, etc.)</li> <li> <p>Formato visualmente atractivo</p> </li> <li> <p>Tablas de Datos:</p> </li> <li>Top 5 Testers por calidad</li> <li>Contenido m\u00e1s dif\u00edcil</li> <li>Sesiones recientes</li> <li> <p>Formato con colores tem\u00e1ticos de WoW</p> </li> <li> <p>Footer Profesional:</p> </li> <li>Numeraci\u00f3n de p\u00e1ginas</li> <li>Marca de agua opcional</li> </ol>"},{"location":"propuesta_fase2/#estructura-de-archivos-nuevos","title":"\ud83d\udce6 Estructura de Archivos Nuevos","text":"<pre><code>my_web/\n\u251c\u2500\u2500 includes/\n\u2502   \u251c\u2500\u2500 wow_auth.php (MODIFICADO - mejoras de seguridad)\n\u2502   \u2514\u2500\u2500 blizzard_api.php (NUEVO - integraci\u00f3n API)\n\u251c\u2500\u2500 admin/\n\u2502   \u251c\u2500\u2500 wow_blizzard_sync.php (NUEVO - sincronizaci\u00f3n)\n\u2502   \u251c\u2500\u2500 wow_reportes_pdf.php (NUEVO - generador PDF)\n\u2502   \u251c\u2500\u2500 wow_auditoria.php (NUEVO - logs de auditor\u00eda)\n\u2502   \u251c\u2500\u2500 wow_reportes.php (MODIFICADO - bot\u00f3n PDF)\n\u2502   \u2514\u2500\u2500 wow_testers.php (MODIFICADO - datos Blizzard)\n\u251c\u2500\u2500 setup/\n\u2502   \u2514\u2500\u2500 crear_tabla_audit.php (NUEVO - tabla auditor\u00eda)\n\u251c\u2500\u2500 cache/ (NUEVO - cach\u00e9 de API)\n\u251c\u2500\u2500 vendor/ (Composer - TCPDF)\n\u251c\u2500\u2500 composer.json (NUEVO)\n\u251c\u2500\u2500 propuesta_fase2.md (ESTE DOCUMENTO)\n\u2514\u2500\u2500 README.md (MODIFICADO - documentaci\u00f3n actualizada)\n</code></pre>"},{"location":"propuesta_fase2/#requisitos-tecnicos","title":"\ud83d\udd27 Requisitos T\u00e9cnicos","text":""},{"location":"propuesta_fase2/#extensiones-php-necesarias","title":"Extensiones PHP Necesarias","text":"<ul> <li>\u2705 <code>pdo_sqlite</code> (ya instalada)</li> <li>\u2705 <code>curl</code> (verificar con <code>php -m | grep curl</code>)</li> <li>\u2705 <code>json</code> (incluida por defecto en PHP 7.4+)</li> <li>\u2705 <code>gd</code> o <code>imagick</code> (opcional, para manipulaci\u00f3n de im\u00e1genes en PDF)</li> </ul>"},{"location":"propuesta_fase2/#credenciales-blizzard","title":"Credenciales Blizzard","text":"<ol> <li>Registrarse en Blizzard Developer Portal</li> <li>Crear una aplicaci\u00f3n</li> <li>Obtener Client ID y Client Secret</li> <li>Configurar en archivo <code>includes/blizzard_config.php</code>:</li> </ol> <pre><code>&lt;?php\ndefine('BLIZZARD_CLIENT_ID', 'tu_client_id_aqui');\ndefine('BLIZZARD_CLIENT_SECRET', 'tu_client_secret_aqui');\ndefine('BLIZZARD_REGION', 'eu');\n?&gt;\n</code></pre>"},{"location":"propuesta_fase2/#instalacion-de-composer","title":"Instalaci\u00f3n de Composer","text":"<p>Si no est\u00e1 instalado:</p> <pre><code># Windows\nphp -r \"copy('https://getcomposer.org/installer', 'composer-setup.php');\"\nphp composer-setup.php\nphp -r \"unlink('composer-setup.php');\"\n</code></pre> <p>Luego ejecutar:</p> <pre><code>php composer.phar install\n</code></pre>"},{"location":"propuesta_fase2/#ventajas-de-este-enfoque","title":"\u2705 Ventajas de este Enfoque","text":""},{"location":"propuesta_fase2/#1-tecnologias-nativas-de-php","title":"1. Tecnolog\u00edas Nativas de PHP","text":"<ul> <li>cURL: Incluido en PHP, robusto y ampliamente documentado</li> <li>filter_var(): Funciones nativas de validaci\u00f3n, m\u00e1s seguras que regex manuales</li> <li>PDO: Ya implementado, sin cambios necesarios</li> <li>TCPDF: Librer\u00eda PHP pura, sin dependencias externas</li> </ul>"},{"location":"propuesta_fase2/#2-compatibilidad-total","title":"2. Compatibilidad Total","text":"<ul> <li>No requiere Node.js, npm, ni Express</li> <li>Funciona en cualquier servidor con PHP 7.4+</li> <li>SQLite port\u00e1til, sin configuraci\u00f3n de MySQL/PostgreSQL</li> </ul>"},{"location":"propuesta_fase2/#3-seguridad-mejorada","title":"3. Seguridad Mejorada","text":"<ul> <li>Control de acceso granular por m\u00f3dulo</li> <li>Logs de auditor\u00eda para trazabilidad</li> <li>Validaciones con funciones probadas de PHP</li> <li>Protecci\u00f3n CSRF en todas las operaciones de escritura</li> </ul>"},{"location":"propuesta_fase2/#4-profesionalidad","title":"4. Profesionalidad","text":"<ul> <li>Reportes PDF de calidad empresarial</li> <li>Integraci\u00f3n con API oficial de Blizzard</li> <li>Sistema de cach\u00e9 para optimizar rendimiento</li> <li>Documentaci\u00f3n t\u00e9cnica completa</li> </ul>"},{"location":"propuesta_fase2/#cronograma-estimado","title":"\ud83d\udcc5 Cronograma Estimado","text":"Tarea Tiempo Estimado Configuraci\u00f3n Blizzard API + cURL 3-4 horas M\u00f3dulo de sincronizaci\u00f3n de personajes 2-3 horas Mejoras de seguridad (auditor\u00eda + validaciones) 2-3 horas Instalaci\u00f3n TCPDF + generador PDF 3-4 horas Pruebas y ajustes 2 horas TOTAL 12-16 horas"},{"location":"propuesta_fase2/#justificacion-academica","title":"\ud83c\udf93 Justificaci\u00f3n Acad\u00e9mica","text":"<p>Este proyecto demuestra conocimientos avanzados de:</p> <ol> <li>Integraci\u00f3n de APIs externas usando cURL nativo de PHP</li> <li>Seguridad web con m\u00faltiples capas de protecci\u00f3n</li> <li>Generaci\u00f3n de documentos con librer\u00edas PHP profesionales</li> <li>Arquitectura limpia con separaci\u00f3n de responsabilidades</li> <li>Optimizaci\u00f3n mediante sistemas de cach\u00e9</li> <li>Validaci\u00f3n de datos con funciones nativas de PHP</li> </ol> <p>Todo ello utilizando exclusivamente tecnolog\u00edas PHP, sin mezclar conceptos de otros ecosistemas como Node.js/Express.</p>"},{"location":"propuesta_fase2/#referencias-tecnicas","title":"\ud83d\udcda Referencias T\u00e9cnicas","text":"<ul> <li>Blizzard API Documentation</li> <li>PHP cURL Manual</li> <li>PHP filter_var() Documentation</li> <li>TCPDF Documentation</li> <li>PDO Security Best Practices</li> </ul> <p>Fecha de Propuesta: 14 de Enero de 2026 Autor: Alejandro Asignatura: Desarrollo Web (IAW) Fase: 2 - Integraci\u00f3n y Profesionalizaci\u00f3n</p>"},{"location":"walkthrough/","title":"Walkthrough - Fase 2: WoW Test Manager","text":"<p>Resumen completo de los cambios implementados en la Fase 2 del proyecto WoW Test Manager, adaptado para usar exclusivamente tecnolog\u00edas nativas de PHP seg\u00fan las indicaciones del profesor.</p>"},{"location":"walkthrough/#resumen-ejecutivo","title":"\ud83d\udccb Resumen Ejecutivo","text":"<p>Se ha completado la adaptaci\u00f3n del proyecto para eliminar todas las referencias incorrectas a Node.js/Express y se han implementado tres pilares fundamentales usando PHP puro:</p> <ol> <li>Integraci\u00f3n con Blizzard API usando cURL</li> <li>Sistema de Seguridad Mejorado con auditor\u00eda y validaciones nativas</li> <li>Exportaci\u00f3n PDF Profesional con TCPDF</li> </ol>"},{"location":"walkthrough/#archivos-creados","title":"\ud83d\udcc4 Archivos Creados","text":""},{"location":"walkthrough/#documentacion","title":"Documentaci\u00f3n","text":""},{"location":"walkthrough/#propuesta_fase2md","title":"propuesta_fase2.md","text":"<p>Documento t\u00e9cnico completo que reemplaza cualquier propuesta anterior con terminolog\u00eda incorrecta. Incluye: - Descripci\u00f3n del proyecto en PHP puro - Implementaci\u00f3n detallada de Blizzard API con cURL - Sistema de seguridad con funciones nativas PHP - Generaci\u00f3n de PDF con TCPDF - Justificaci\u00f3n acad\u00e9mica y t\u00e9cnica</p>"},{"location":"walkthrough/#instalacion_fase2md","title":"INSTALACION_FASE2.md","text":"<p>Gu\u00eda paso a paso para instalar y configurar las nuevas funcionalidades: - Creaci\u00f3n de tabla de auditor\u00eda - Instalaci\u00f3n de TCPDF v\u00eda Composer - Configuraci\u00f3n de credenciales Blizzard API - Soluci\u00f3n de problemas comunes</p>"},{"location":"walkthrough/#integracion-blizzard-api","title":"Integraci\u00f3n Blizzard API","text":""},{"location":"walkthrough/#includesblizzard_apiphp","title":"includes/blizzard_api.php","text":"<p>Clase completa <code>BlizzardAPI</code> con: - Autenticaci\u00f3n OAuth2 usando cURL - M\u00e9todos para obtener perfil, equipamiento y media de personajes - Sistema de cach\u00e9 en archivos (TTL configurable) - Manejo robusto de errores HTTP (401, 404, 429, 500) - Funci\u00f3n est\u00e1tica <code>extractProfileData()</code> para simplificar datos</p> <p>Ejemplo de uso: <pre><code>$api = new BlizzardAPI($clientId, $clientSecret);\n$profile = $api-&gt;getCharacterProfile('ragnaros', 'thrall');\n$data = BlizzardAPI::extractProfileData($profile);\n// $data contiene: level, class, race, faction, ilvl, etc.\n</code></pre></p>"},{"location":"walkthrough/#includesblizzard_configphp","title":"includes/blizzard_config.php","text":"<p>Archivo de configuraci\u00f3n para credenciales de Blizzard Developer Portal.</p>"},{"location":"walkthrough/#adminwow_blizzard_syncphp","title":"admin/wow_blizzard_sync.php","text":"<p>Interfaz administrativa para: - Vincular testers con personajes de WoW (realm + nombre) - Sincronizar datos manualmente desde Blizzard API - Visualizar nivel, clase, ilvl, \u00faltima sincronizaci\u00f3n - A\u00f1ade autom\u00e1ticamente columnas a la tabla <code>tester</code></p>"},{"location":"walkthrough/#sistema-de-seguridad","title":"Sistema de Seguridad","text":""},{"location":"walkthrough/#includeswow_authphp-modificado","title":"includes/wow_auth.php (MODIFICADO)","text":"<p>A\u00f1adidas nuevas funciones de seguridad:</p> <p>Validaciones Nativas: <pre><code>validarEmail($email)          // Usa FILTER_VALIDATE_EMAIL\nvalidarEntero($valor, $min, $max)  // Usa FILTER_VALIDATE_INT\nsanitizarTexto($texto)        // htmlspecialchars + trim\nvalidarURL($url)              // Usa FILTER_VALIDATE_URL\n</code></pre></p> <p>Sistema de Auditor\u00eda: <pre><code>registrarAccionAuditoria($usuarioId, $modulo, $accion, $detalles)\n// Guarda en tabla audit_log: usuario, m\u00f3dulo, acci\u00f3n, IP, timestamp\n</code></pre></p> <p>Control de Escritura: <pre><code>verificarPermisoEscritura($moduloRequerido, $nombreModulo)\n// Verifica POST + rol + CSRF + registra en auditor\u00eda\n</code></pre></p>"},{"location":"walkthrough/#setupcrear_tabla_auditphp","title":"setup/crear_tabla_audit.php","text":"<p>Script para crear la tabla <code>audit_log</code> con \u00edndices optimizados: <pre><code>CREATE TABLE audit_log (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    usuario_id INTEGER,\n    modulo TEXT,\n    accion TEXT,\n    detalles TEXT,\n    ip_address TEXT,\n    timestamp INTEGER\n);\n</code></pre></p>"},{"location":"walkthrough/#sistema-de-reportes-pdf","title":"Sistema de Reportes PDF","text":""},{"location":"walkthrough/#composerjson","title":"composer.json","text":"<p>Configuraci\u00f3n de dependencias para instalar TCPDF: <pre><code>{\n    \"require\": {\n        \"php\": \"&gt;=7.4\",\n        \"tecnickcom/tcpdf\": \"^6.6\"\n    }\n}\n</code></pre></p>"},{"location":"walkthrough/#adminwow_reportes_pdfphp","title":"admin/wow_reportes_pdf.php","text":"<p>Generador completo de PDF profesional con: - Clase personalizada <code>WoWReportPDF</code> extendiendo TCPDF - Header con logo WoW y t\u00edtulo - Footer con paginaci\u00f3n - P\u00e1gina 1: Portada + Resumen Ejecutivo (KPIs en cuadr\u00edcula) + Top 5 Testers + Contenido M\u00e1s Dif\u00edcil - P\u00e1gina 2: \u00daltimas 10 sesiones con c\u00f3digo de colores por score - Dise\u00f1o tem\u00e1tico con colores dorados (#FFD100) y fondos oscuros</p>"},{"location":"walkthrough/#adminwow_reportesphp-modificado","title":"admin/wow_reportes.php (MODIFICADO)","text":"<p>A\u00f1adido bot\u00f3n de exportaci\u00f3n PDF junto al CSV existente: <pre><code>&lt;a href=\"wow_reportes_pdf.php\" class=\"btn-wow secondary\"&gt;\n    &lt;i class=\"fa-solid fa-file-pdf\"&gt;&lt;/i&gt; Descargar PDF Profesional\n&lt;/a&gt;\n</code></pre></p>"},{"location":"walkthrough/#archivos-modificados","title":"\ud83d\udcdd Archivos Modificados","text":""},{"location":"walkthrough/#readmemd","title":"README.md","text":"<p>Secci\u00f3n de Seguridad actualizada (l\u00edneas 48-57): - Cambio: \"Tokens CSRF\" \u2192 \"Protecci\u00f3n CSRF Manual con tokens de sesi\u00f3n generados con <code>random_bytes()</code>\" - Cambio: \"Inyecci\u00f3n SQL\" \u2192 \"Prevenci\u00f3n de Inyecci\u00f3n SQL: Todo el sistema usa PDO con sentencias preparadas (<code>prepare()</code> + <code>execute()</code>)\" - A\u00f1adido: \"Sistema de Control de Acceso: Funciones PHP <code>verificarLogin()</code> y <code>verificarRol()</code>\" - A\u00f1adido: \"Validaciones Nativas: Uso de <code>filter_var()</code> y funciones nativas de PHP\"</p> <p>Nueva secci\u00f3n a\u00f1adida (despu\u00e9s de l\u00ednea 59): - \"\ud83d\ude80 Nuevas Funcionalidades - Fase 2\" - Subsecciones: Integraci\u00f3n Blizzard API, Sistema de Reportes Profesionales, Mejoras de Seguridad</p>"},{"location":"walkthrough/#tecnologias-utilizadas-100-php","title":"\ud83d\udd27 Tecnolog\u00edas Utilizadas (100% PHP)","text":"Funcionalidad Tecnolog\u00eda PHP Antes (Incorrecto) Integraci\u00f3n API cURL nativo \u274c \"Middlewares de Express\" Validaciones <code>filter_var()</code> \u274c \"express-validator\" Control de acceso <code>verificarRol()</code> \u274c \"Middlewares\" Generaci\u00f3n PDF TCPDF (Composer) \u274c No exist\u00eda Cach\u00e9 <code>file_put_contents()</code> \u274c \"estructura as\u00edncrona\" Auditor\u00eda PDO + SQLite \u274c No exist\u00eda"},{"location":"walkthrough/#verificacion-realizada","title":"\u2705 Verificaci\u00f3n Realizada","text":""},{"location":"walkthrough/#1-documentacion","title":"1. Documentaci\u00f3n","text":"<ul> <li>\u2705 <code>propuesta_fase2.md</code> no contiene referencias a Node.js/Express</li> <li>\u2705 <code>README.md</code> actualizado con terminolog\u00eda PHP correcta</li> <li>\u2705 <code>INSTALACION_FASE2.md</code> creado con instrucciones claras</li> </ul>"},{"location":"walkthrough/#2-codigo-php","title":"2. C\u00f3digo PHP","text":"<ul> <li>\u2705 <code>blizzard_api.php</code> usa solo cURL, sin dependencias externas</li> <li>\u2705 <code>wow_auth.php</code> usa <code>filter_var()</code> para validaciones</li> <li>\u2705 Sistema de auditor\u00eda funcional con PDO</li> <li>\u2705 <code>wow_reportes_pdf.php</code> genera PDF con TCPDF</li> </ul>"},{"location":"walkthrough/#3-estructura-del-proyecto","title":"3. Estructura del Proyecto","text":"<ul> <li>\u2705 Todos los archivos en las ubicaciones correctas</li> <li>\u2705 <code>composer.json</code> configurado para TCPDF</li> <li>\u2705 Carpeta <code>cache/</code> lista para API</li> </ul>"},{"location":"walkthrough/#proximos-pasos-para-el-usuario","title":"\ud83d\udce6 Pr\u00f3ximos Pasos para el Usuario","text":""},{"location":"walkthrough/#1-instalacion-de-dependencias","title":"1. Instalaci\u00f3n de Dependencias","text":"<pre><code># En el directorio my_web/\ncomposer install\n</code></pre> <p>Esto instalar\u00e1 TCPDF en <code>vendor/</code>.</p>"},{"location":"walkthrough/#2-crear-tabla-de-auditoria","title":"2. Crear Tabla de Auditor\u00eda","text":"<pre><code>php setup/crear_tabla_audit.php\n</code></pre>"},{"location":"walkthrough/#3-configurar-blizzard-api-opcional","title":"3. Configurar Blizzard API (Opcional)","text":"<ol> <li>Registrarse en https://develop.battle.net/</li> <li>Crear aplicaci\u00f3n y obtener Client ID + Secret</li> <li>Editar <code>includes/blizzard_config.php</code> con las credenciales</li> </ol>"},{"location":"walkthrough/#4-crear-carpeta-de-cache","title":"4. Crear Carpeta de Cach\u00e9","text":"<pre><code>mkdir cache\nmkdir cache/blizzard\n</code></pre> <p>En Windows: <pre><code>md cache\nmd cache\\blizzard\n</code></pre></p>"},{"location":"walkthrough/#5-probar-funcionalidades","title":"5. Probar Funcionalidades","text":"<p>PDF: 1. Login como admin 2. Ir a \"Reportes\" 3. Clic en \"Descargar PDF Profesional\"</p> <p>Blizzard API (si configurado): 1. Ir a \"Blizzard API\" 2. Vincular un tester con un personaje real 3. Clic en \"Sincronizar Datos\"</p>"},{"location":"walkthrough/#justificacion-academica","title":"\ud83c\udf93 Justificaci\u00f3n Acad\u00e9mica","text":"<p>Este proyecto demuestra:</p> <ol> <li>Integraci\u00f3n de APIs REST usando cURL nativo de PHP (OAuth2, manejo de errores HTTP)</li> <li>Seguridad web multicapa (CSRF, validaciones nativas, auditor\u00eda, control de acceso)</li> <li>Generaci\u00f3n de documentos con librer\u00edas PHP profesionales (TCPDF)</li> <li>Optimizaci\u00f3n mediante sistemas de cach\u00e9 basados en archivos</li> <li>Arquitectura limpia con separaci\u00f3n de responsabilidades (MVC impl\u00edcito)</li> </ol> <p>Todo implementado con tecnolog\u00edas PHP puras, sin mezclar conceptos de Node.js/Express.</p>"},{"location":"walkthrough/#estadisticas-del-proyecto","title":"\ud83d\udcca Estad\u00edsticas del Proyecto","text":"<ul> <li>Archivos creados: 7</li> <li>Archivos modificados: 3</li> <li>L\u00edneas de c\u00f3digo a\u00f1adidas: ~1,200</li> <li>Funciones nuevas: 8 (validaciones + auditor\u00eda + API)</li> <li>Tablas nuevas: 1 (audit_log)</li> <li>Dependencias a\u00f1adidas: 1 (TCPDF v\u00eda Composer)</li> </ul>"},{"location":"walkthrough/#cambios-clave-por-archivo","title":"\ud83d\udd0d Cambios Clave por Archivo","text":"Archivo Cambio Principal <code>propuesta_fase2.md</code> Documento completo con terminolog\u00eda PHP correcta <code>blizzard_api.php</code> Clase para integraci\u00f3n API con cURL y cach\u00e9 <code>wow_auth.php</code> +8 funciones (validaciones, auditor\u00eda, permisos) <code>wow_reportes_pdf.php</code> Generador PDF con dise\u00f1o WoW profesional <code>wow_blizzard_sync.php</code> Interfaz admin para sincronizaci\u00f3n de personajes <code>crear_tabla_audit.php</code> Script de creaci\u00f3n de tabla de logs <code>README.md</code> Secci\u00f3n de seguridad actualizada + Fase 2 features"},{"location":"walkthrough/#conclusion","title":"\u2728 Conclusi\u00f3n","text":"<p>La Fase 2 ha sido completada exitosamente, adaptando el proyecto a las indicaciones del profesor:</p> <p>\u2705 Eliminadas todas las referencias a Node.js/Express \u2705 Implementada integraci\u00f3n Blizzard API con cURL \u2705 Mejorado sistema de seguridad con funciones nativas PHP \u2705 A\u00f1adida exportaci\u00f3n PDF profesional con TCPDF \u2705 Documentado todo el proceso t\u00e9cnicamente  </p> <p>El proyecto ahora refleja correctamente el uso de PHP puro y est\u00e1 listo para ser defendido ante el tribunal.</p> <p>Fecha de Finalizaci\u00f3n: 14 de Enero de 2026 Autor: Alejandro Asignatura: Desarrollo Web (IAW)</p>"}]}